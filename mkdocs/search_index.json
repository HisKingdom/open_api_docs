{
    "docs": [
        {
            "location": "/", 
            "text": "Welcome to MkDocs\n\n\nFor full documentation visit \nmkdocs.org\n.\n\n\nCommands\n\n\n\n\nmkdocs new [dir-name]\n - Create a new project.\n\n\nmkdocs serve\n - Start the live-reloading docs server.\n\n\nmkdocs build\n - Build the documentation site.\n\n\nmkdocs help\n - Print this help message.\n\n\n\n\nProject layout\n\n\nmkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.", 
            "title": "HOME"
        }, 
        {
            "location": "/#welcome-to-mkdocs", 
            "text": "For full documentation visit  mkdocs.org .", 
            "title": "Welcome to MkDocs"
        }, 
        {
            "location": "/#commands", 
            "text": "mkdocs new [dir-name]  - Create a new project.  mkdocs serve  - Start the live-reloading docs server.  mkdocs build  - Build the documentation site.  mkdocs help  - Print this help message.", 
            "title": "Commands"
        }, 
        {
            "location": "/#project-layout", 
            "text": "mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.", 
            "title": "Project layout"
        }, 
        {
            "location": "/faq/", 
            "text": "\u7528\u6237\u63a5\u5165 ConverLab \u7684\u5927\u81f4\u6d41\u7a0b\u662f\u600e\u6837\u7684?\n\n\n \u514d\u8d39\u7528\u6237 ( \u6bcf\u65e5\u989d\u5ea6: 200 )\n\n\n\n\n\u6ce8\u518c\u5e10\u53f7, \u6fc0\u6d3b\u90ae\u4ef6 ( \u6bcf\u65e5\u989d\u5ea6: +30 )\n\n\n\u5b8c\u5584\u4fe1\u606f ( \u6bcf\u65e5\u989d\u5ea6: +30 )", 
            "title": "OPENAPI V1"
        }, 
        {
            "location": "/faq/#converlab", 
            "text": "\u514d\u8d39\u7528\u6237 ( \u6bcf\u65e5\u989d\u5ea6: 200 )   \u6ce8\u518c\u5e10\u53f7, \u6fc0\u6d3b\u90ae\u4ef6 ( \u6bcf\u65e5\u989d\u5ea6: +30 )  \u5b8c\u5584\u4fe1\u606f ( \u6bcf\u65e5\u989d\u5ea6: +30 )", 
            "title": "\u7528\u6237\u63a5\u5165 ConverLab \u7684\u5927\u81f4\u6d41\u7a0b\u662f\u600e\u6837\u7684?"
        }, 
        {
            "location": "/sms/", 
            "text": "\u77ed\u4fe1\u7c7b\u578b\n\n\n\u77ed\u4fe1\u76ee\u524d\u53ea\u5bf9\u5185\u6d4b\u7528\u6237\u5f00\u653e\uff0c\u82e5\u8981\u4f7f\u7528\uff0c\u8bf7\u8054\u7cfb\u5728\u7ebf\u5ba2\u670d\uff08QQ 4000069990\uff09\u8fdb\u884c\u7533\u8bf7\u3002\n\n\n\u76ee\u524d ConverLab \u7684\u77ed\u4fe1\u670d\u52a1\u53ea\u652f\u6301\u89e6\u53d1\u77ed\u4fe1\n\n\n\u89e6\u53d1\u77ed\u4fe1\n\uff1a\u7531\u7528\u6237\u884c\u4e3a\u89e6\u53d1\u751f\u4ea7, \u5982:\u52a8\u6001\u5bc6\u7801, \u624b\u673a\u9a8c\u8bc1, \u8ba2\u5355\u901a\u77e5\u7b49.\n\n\n\n\n\u63a5\u5165\u65b9\u5f0f\n\n\n\u76ee\u524d ConverLab \u5bf9\u77ed\u4fe1\u4e1a\u52a1\u63d0\u4f9b WEBAPI \u7684\u63a5\u5165\u65b9\u5f0f, \u5f00\u53d1\u8005\u53ef\u4ee5\u5229\u7528 ConverLab \u63d0\u4f9b\u7684 HTTP \u63a5\u53e3, \u8c03\u7528 ConverLab \u7684\u670d\u52a1. \n\n\n\u4f7f\u7528\u6211\u4eec\u7684\u77ed\u4fe1API, \u5f00\u53d1\u8005\u9700\u8981\u521b\u5efa:\n\n\n\n\nSMS_USER \n\n\nSMS_KEY\n\n\n\u77ed\u4fe1\u6a21\u677f\n\n\n\u7b7e\u540d\n\n\n\n\n SMS_USER \u4e0e SMS_KEY \n\n\n\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\n\u3010\u77ed\u4fe1\u9875\u9762\u3011-\u3010\u77ed\u4fe1\u8bbe\u7f6e\u3011-\u3010\u53d1\u9001\u6388\u6743\u3011\n\u6765\u521b\u5efa SMS_USER, \u540c\u65f6 ConverLab \u4f1a\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684 SMS_KEY. \u76ee\u524d ConverLab \u53ea\u5141\u8bb8\u62e5\u6709\u4e00\u4e2a SMS_USER.\n\n\n\u77ed\u4fe1\u6a21\u677f\n\n\n\u77ed\u4fe1\u6a21\u677f, \u7528\u6237\u5728\u53d1\u9001\u77ed\u4fe1\u4e4b\u524d,\u5fc5\u987b\u5728\u524d\u53f0\u9875\u9762\u7f16\u8f91\u77ed\u4fe1\u5185\u5bb9, \u5e76\u63d0\u4ea4\u5ba1\u6838. \u5ba1\u6838\u901a\u8fc7\u540e, \u901a\u8fc7\u6a21\u677f\u7684 ID \u8c03\u7528\u53d1\u9001. \n\n\n\u53d8\u91cf\u66ff\u6362\n\n\nConverLab \u652f\u6301\u5728\u77ed\u4fe1\u4e2d\u4f7f\u7528\u300c\u53d8\u91cf\u300d.\n\n\n\u53d8\u91cf\u7684\u683c\u5f0f: \u9996\u5c3e\u4f7f\u7528 \n%\n \u5305\u56f4, \u5373\u4e3a\u7528\u6237\u5b9a\u4e49\u7684\u4e00\u4e2a\u53d8\u91cf. \u4e3e\u4f8b:\n\n\n\u6b22\u8fce\u4f7f\u7528\u7231\u53d1\u4fe1. \u60a8\u7684\u624b\u673a\u9a8c\u8bc1\u7801\u662f: %code%. # code\u662f\u53d8\u91cf\n\n\n\n\n\u53d8\u91cf\u7684\u7528\u6cd5:\n\n\n\n\n\u5728\u77ed\u4fe1\u6a21\u677f\u4e2d\u4f7f\u7528\u53d8\u91cf, \u4f5c\u4e3a\u5360\u4f4d\u7b26\n\n\n\u5728\u77ed\u4fe1 API \u4e2d\u8bbe\u7f6e\u53d8\u91cf\u7684\u503c\n\n\nConverLab \u4f1a\u6839\u636e\u8bf7\u6c42\u53c2\u6570, \u6765\u66ff\u6362\u77ed\u4fe1\u5185\u5bb9\u4e2d\u76f8\u5e94\u53d8\u91cf\u7684\u503c\n\n\n\u53d8\u91cf\u7684\u503c\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 32 \u4e2a\u5b57\u7b26, \u53d8\u91cf\u7684\u503c\u4e2d\u4e0d\u80fd\u542b\u6709 HTTP \u94fe\u63a5\n\n\n\n\n\u7b7e\u540d\n\n\n\u7531\u4e8e\u77ed\u4fe1\u53d1\u9001\u7684\u7279\u6b8a\u6027, \u4ee5\u53ca\u76f8\u5173\u7684 ISP \u673a\u6784\u7684\u5ba1\u67e5\u5236\u5ea6, \u77ed\u4fe1\u5185\u5bb9\u4e2d\u5fc5\u987b\u542b\u6709\u80fd\u8bf4\u660e\u53d1\u9001\u8005\u8eab\u4efd\u7684\u7b7e\u540d. \u76ee\u524d, ConverLab \u652f\u6301\u5728\u7f16\u8f91\u77ed\u4fe1\u6a21\u677f\u65f6\u6dfb\u52a0\u7b7e\u540d, \u5e76\u8bbe\u7f6e\u7b7e\u540d\u4f4d\u7f6e(\u76ee\u524d\u53ea\u652f\u6301\u7b7e\u540d\u5728\u77ed\u4fe1\u5c3e\u90e8).\n\n\n\u6ce8\u610f:\n\u77ed\u4fe1\u6a21\u677f\u5fc5\u987b\u542b\u6709\u300c\u7b7e\u540d\u300d, \u5426\u5219\u4e0d\u80fd\u901a\u8fc7\u5ba1\u6838. \u76ee\u524d\u7528\u6237\u53ea\u80fd\u62e5\u67091\u4e2a\u7b7e\u540d.\n\n\n\u62e6\u622a\u5217\u8868\n\n\n\u4e3a\u51cf\u5c11\u7528\u6237\u5bf9\u7a7a\u53f7, \u505c\u673a\u7b49\u624b\u673a\u53f7\u7801\u7684\u65e0\u6548\u53d1\u9001, ConverLab \u4f1a\u6839\u636e\u8fd0\u8425\u5546\u53cd\u9988\u7684\u53d1\u9001\u7ed3\u679c\u6765\u505a\u76f8\u5e94\u7684\u62e6\u622a\u5904\u7406.\n\n\n\u6240\u6709\n\u53d1\u9001\u5931\u8d25\n\u7684\u624b\u673a\u53f7\u7801\u90fd\u4f1a\u8fdb\u5165\u62e6\u622a\u5217\u8868, \u62e6\u622a\u5217\u8868\u8bb0\u5f55\u7684\u5b57\u6bb5\u5982\u4e0b: \n\n\n\n\n\u624b\u673a\u53f7\u7801: \u62e6\u622a\u7684\u624b\u673a\u53f7\u7801\n\n\n\u62e6\u622a\u65f6\u95f4: \u6b64\u65f6\u95f4\u4e4b\u540e\u7684\u53d1\u9001\u4f1a\u88ab ConverLab \u62e6\u622a\n\n\n\u5931\u6548\u65f6\u95f4: \u6b64\u65f6\u95f4\u4e4b\u540e\u7684\u53d1\u9001\u6062\u590d\u6b63\u5e38\n\n\n\u539f\u56e0: \u8fd0\u8425\u5546\u53cd\u9988\u7684\u53d1\u9001\u7ed3\u679c\u660e\u7ec6\n\n\n\n\n\u4e0d\u540c\u7684\u5931\u8d25\u539f\u56e0\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u62e6\u622a\u65f6\u95f4, \u4e0d\u540c\u7684\u62e6\u622a\u8303\u56f4, \u8be6\u7ec6\u89c1\u4e0b\u8868: \n\n\n\n\n\n\n\n\n\u8fd4\u56de\u7801\n\n\n\u5931\u8d25\u63cf\u8ff0\n\n\n\u62e6\u622a\u65f6\u95f4\n\n\n\u5168\u5c40,\u5c40\u90e8\n\n\n\u7528\u6237\u662f\u5426\u53ef\u5220\u9664\n\n\n\n\n\n\n\n\n\n\n500\n\n\n\u53d1\u9001\u5931\u8d25, \u624b\u673a\u7a7a\u53f7\n\n\n30 \u5929\n\n\n\u5168\u5c40\u62e6\u622a\n\n\n\u662f\n\n\n\n\n\n\n510\n\n\n\u53d1\u9001\u5931\u8d25, \u624b\u673a\u505c\u673a\n\n\n1 \u5c0f\u65f6\n\n\n\u5168\u5c40\u62e6\u622a\n\n\n\u662f\n\n\n\n\n\n\n550\n\n\n\u53d1\u9001\u5931\u8d25, \u8be5\u6a21\u677f\u5185\u5bb9\u88ab\u6295\u8bc9\n\n\n1 \u5c0f\u65f6\n\n\n\u5c40\u90e8\u62e6\u622a\n\n\n\u662f\n\n\n\n\n\n\n580\n\n\n\u53d1\u9001\u5931\u8d25, \u624b\u673a\u5173\u673a\n\n\n0 \u79d2\n\n\n\u662f\n\n\n\n\n\n\n\n\n590\n\n\n\u53d1\u9001\u5931\u8d25, \u5176\u4ed6\u539f\u56e0\n\n\n0 \u79d2\n\n\n\u662f\n\n\n\n\n\n\n\n\n\n\n\u5168\u5c40\u62e6\u622a: \u6b64\u6761\u62e6\u622a\u8bb0\u5f55\u4f1a\u5bf9 ConverLab \u6240\u6709\u7528\u6237\u751f\u6548. \n\n\n\u5c40\u90e8\u62e6\u622a: \u6b64\u6761\u62e6\u622a\u8bb0\u5f55\u53ea\u4f1a\u5bf9\u6765\u6e90\u7528\u6237\u751f\u6548.\n\n\n\u7528\u6237\u53ef\u4ee5\u5728\u62e6\u622a\u5217\u8868\u4e2d\u5220\u9664\n\u6765\u6e90\u662f\u81ea\u5df1\n\u7684\u8bb0\u5f55, \u5bf9\u4e8e\n\u6765\u6e90\u4e0d\u662f\u81ea\u5df1\n\u7684\u62e6\u622a\u624b\u673a\u53f7, \u53ef\u4ee5\u5728\u786e\u8ba4\u624b\u673a\u53f7\u901a\u8baf\u6b63\u5e38\u4e4b\u540e, \u8054\u7cfb\u5ba2\u670d\u5904\u7406.\n\n\nAPI \u9a8c\u8bc1\u673a\u5236\n\n\n\u77ed\u4fe1\u53d1\u9001\u4f7f\u7528\n\u6570\u5b57\u7b7e\u540d\n\u7684\u9a8c\u8bc1\u6a21\u5f0f. \u8fd9\u79cd\u6a21\u5f0f\u80fd\u591f\u6709\u6548\u907f\u514d\u5bc6\u7801\u5728\u4f20\u8f93\u9014\u4e2d\u7684\u6cc4\u9732, \u662f\u5b89\u5168\u7ea7\u522b\u5f88\u9ad8\u7684\u4e00\u79cd\u52a0\u5bc6\u9a8c\u8bc1\u65b9\u5f0f.\n\n\n\u6570\u5b57\u7b7e\u540d\n\u7684\u9a8c\u8bc1\u6a21\u5f0f: \u8c03\u7528 API \u65f6, \u7528\u6237\u4e0d\u9700\u8981\u628a\u5bc6\u7801 ( SMS_KEY ) \u4f5c\u4e3a\u53c2\u6570\u660e\u6587\u4f20\u8f93, \u800c\u662f\u5c06\u6570\u5b57\u7b7e\u540d ( signature ) \u4f5c\u4e3a\u53c2\u6570\u4f20\u8f93\u7ed9\u670d\u52a1\u5668. \u670d\u52a1\u5668\u7aef\u4f1a\u9a8c\u8bc1\u6b64 signature \u7684\u6b63\u786e\u6027.\n\n\n\u751f\u6210\n\u6570\u5b57\u7b7e\u540d\n ( signature ) \u7684\u65b9\u6cd5: \n\n\n1. \u5c06\u5b9e\u9645\u8c03\u7528API\u7684\u53c2\u6570\u4ee5\u5b57\u6bcd\u5347\u5e8f(A-Z)\u6392\u5217, \u4e0d\u5305\u62ec smsKey \u548c signature \u5b57\u6bb5\u672c\u8eab\n2. \u6309\u7167\u6392\u5217\u4e4b\u540e\u7684\u987a\u5e8f, \u4ee5 'key=value' + '\n' + 'key=value' \u7684\u65b9\u5f0f\u8fde\u63a5\u6240\u6709\u53c2\u6570, \n   \u5f97\u5230\u5b57\u7b26\u4e32 param_str\n3. \u4ee5 SMS_KEY + '\n' + param_str + '\n' + SMS_KEY \u7684\u65b9\u5f0f\u5f97\u5230\u5b57\u7b26\u4e32 sign_str\n4. \u8ba1\u7b97 sign_str \u7684MD5\u503c (32\u4f4d, \u4e0d\u533a\u5206\u5927\u5c0f\u5199), \u5f97\u5230 signature\n\n\u63d0\u793a:\n1. \u751f\u6210\u7b7e\u540d\u65f6, \u53c2\u6570\u4e0d\u8981\u4f7f\u7528 'urlencode'. \u5728\u8c03\u7528 api \u65f6, \u624d\u9700\u8981\u5bf9\u53c2\u6570\u505a 'urlencode'\n2. '\n' \u662f\u4ee3\u7801\u4e2d\u4f7f\u7528\u7684\u8fde\u63a5\u7b26, '+'\u662f\u6587\u6863\u663e\u793a\u4e4b\u7528\n\n\n\n\n\n\u4e0b\u9762\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4ee3\u7801\u793a\u4f8b ( python ):\n\n\nimport hashlib\n\nSMS_USER = 'testuser'\nSMS_KEY = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\nparam = {\n    'smsUser': SMS_USER,\n    'templateId' : 1,\n    'phone'  : 18888888888,\n    'vars'   : {},\n}\n\nparam_keys = list(param.keys())\nparam_keys.sort()\n\nparam_str = ''\n\nfor key in param_keys:\n    param_str += key + '=' + str(param[key]) + '\n'\n\nparam_str = param_str[:-1]\n\nsign_str = SMS_KEY + '\n' + param_str + '\n' + SMS_KEY\nsignature = hashlib.md5(sign_str).hexdigest()\n\n\n\n\n\u63d0\u793a\n: \u6240\u6709\u7684 API \u90fd\u652f\u6301 HTTPS. \n\n\ntimestamp \u65f6\u95f4\u6233 ( \u63d0\u5347\u903c\u683c )\n\n\n\u7528\u6237\u53ef\u4ee5\u5728\u6bcf\u4e2a API \u8bf7\u6c42\u4e2d\u52a0\u5165 timestamp \u53c2\u6570, ConverLab \u4f1a\u68c0\u67e5 timestamp \u548c \u670d\u52a1\u5668\u5f53\u524d\u65f6\u95f4, \u5982\u679c\u4e24\u8005\u76f8\u5dee\u5927\u4e8e6\u79d2, \u5219\u8bf7\u6c42\u4f1a\u88ab\u62d2\u7edd.\n\n\n\u7528\u6237\u9700\u8981\u901a\u8fc7\u8c03\u7528 API \u6765\u83b7\u53d6 ConverLab \u670d\u52a1\u5668\u7684\u65f6\u95f4\u6233, \u800c\u4e0d\u662f\u81ea\u5df1\u7684\u672c\u5730\u65f6\u95f4.\n\n\ntimestamp \u53c2\u6570\u9700\u8981\u88ab\u5305\u542b\u5728 signature \u4e2d, \u53c2\u4e0e\u751f\u6210\u6570\u5b57\u7b7e\u540d.\n\n\n\n\nSMSHook\n\n\nSMSHook \u673a\u5236\n\n\n\u7528\u6237\u5c06\u77ed\u4fe1\u8bf7\u6c42\u53d1\u9001\u7ed9 ConverLab \u4e4b\u540e, ConverLab \u4f1a\u628a\u300c\u8bf7\u6c42\u7ed3\u679c\u300d\u540c\u6b65\u8fd4\u56de\u7ed9\u7528\u6237, \u800c\u77ed\u4fe1\u7684\u300c\u53d1\u9001\u7ed3\u679c\u300d\u548c \u300c\u5176\u4ed6\u4e8b\u4ef6\u7ed3\u679c\u300d\u662f\u901a\u8fc7 SMSHook \u5f02\u6b65\u8fd4\u56de\u7ed9\u7528\u6237\u7684.\n\n\n\n\nConverLab \u4e3a\u5ba2\u6237\u63d0\u4f9b\u4e86\u4e00\u4e9b\u77ed\u4fe1\u4e8b\u4ef6, \u5ba2\u6237\u53ef\u4ee5\u9009\u62e9\u5173\u6ce8\u67d0\u4e9b\u4e8b\u4ef6\n\n\n\u5f53\u67d0\u4e8b\u4ef6\u53d1\u751f, \u5c31\u4f1a\u89e6\u53d1 ConverLab \u5411\u5ba2\u6237\u8bbe\u7f6e\u7684 URL \u53d1\u9001\u6570\u636e ( POST )\n\n\n\u5ba2\u6237\u6536\u5230\u6570\u636e, \u89e3\u6790\u51fa\u4e8b\u4ef6\u548c\u6570\u636e, \u505a\u540e\u7eed\u7684\u5904\u7406\n\n\n\n\n\u76ee\u524d ConverLab \u652f\u6301\u7684\u77ed\u4fe1\u4e8b\u4ef6\u5982\u4e0b:\n\n\n\n\n\n\n\n\n\u4e8b\u4ef6\n\n\n\u89e6\u53d1\u6761\u4ef6\n\n\n\n\n\n\n\n\n\n\n\u8bf7\u6c42(request)\n\n\n\u77ed\u4fe1\u8bf7\u6c42\u6210\u529f\n\n\n\n\n\n\n\u9001\u8fbe(deliver)\n\n\n\u77ed\u4fe1\u53d1\u9001\u6210\u529f\n\n\n\n\n\n\n\u5904\u7406\u5931\u8d25(workererror)\n\n\n\u77ed\u4fe1\u5904\u7406\u5931\u8d25\n\n\n\n\n\n\n\u53d1\u9001\u5931\u8d25(delivererror)\n\n\n\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\n\n\n\n\n\n\n\u56de\u590d(reply)\n\n\n\u7528\u6237\u56de\u590d (\u5f00\u53d1\u4e2d)\n\n\n\n\n\n\n\n\n\u4f7f\u7528\u65b9\u6cd5:\n\n\n\n\n\u7528\u6237\u81ea\u884c\u7f16\u5199 HTTP \u670d\u52a1, \u4f7f\u4e4b\u80fd\u591f\u5904\u7406\u76f8\u5e94\u7684\u4e8b\u4ef6, \u89e3\u6790\u76f8\u5173\u6570\u636e, \u5e76\u5f00\u653e\u51fa\u76f8\u5e94URL\n\n\n\u7528\u6237\u5728 ConverLab \u7684 \n\u3010\u77ed\u4fe1\u3011- \u3010\u77ed\u4fe1\u8bbe\u7f6e\u3011-\u3010SMSHook\u3011\n \u4e2d\u9009\u62e9\u5173\u6ce8\u7684\u4e8b\u4ef6, \u914d\u7f6e\u63a5\u6536\u6570\u636e\u7684 URL\n\n\n\n\n\u6ce8\u610f: \u6211\u4eec\u4f1a\u5bf9\u7528\u6237\u63d0\u4f9b\u7684 URL \u505a\u68c0\u6d4b. \u9700\u8981\u6b64 HTTP \u670d\u52a1\u80fd\u591f\u6b63\u786e\u54cd\u5e94 get | post \u8bf7\u6c42, \u5e76\u4e14\u4fdd\u8bc1\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801 \u4e3a 200\n\n\n\u7b7e\u540d\u9a8c\u8bc1\n\n\n\u4e3a\u4e86\u786e\u4fdd\u6d88\u606f\u7684\u6765\u6e90\u8eab\u4efd\u662f ConverLab,  \u4f60\u53ef\u4ee5\u9009\u62e9\u5bf9 POST \u6570\u636e\u7684\u6765\u6e90\u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1. ( \u4e0d\u9a8c\u8bc1, \u76f4\u63a5\u89e3\u6790 POST \u7684\u6570\u636e\u4e5f\u53ef\u4ee5 ). \n\n\n\u5b89\u5168\u8ba4\u8bc1\u7684\u65b9\u6cd5\u5982\u4e0b:\n\n\n\n\n\u901a\u8fc7\n\u3010\u77ed\u4fe1\u3011- \u3010\u77ed\u4fe1\u8bbe\u7f6e\u3011-\u3010SMSHook\u3011\n\u83b7\u53d6 \nAPP KEY\n\n\n\u89e3\u6790\u51fa POST \u6570\u636e\u4e2d\u7684 \ntoken\n, \ntimestamp\n \u548c \nsignature\n\n\n\u4f7f\u7528 \nAPP KEY\n, \ntoken\n \u548c \ntimestamp\n \u751f\u6210\u7b7e\u540d \nsignature\n, \u4e0e POST \u6570\u636e\u4e2d\u7684 \nsignature\n \u8fdb\u884c\u6821\u9a8c ( \u7b7e\u540d\u7b97\u6cd5: \nSHA256\n)\n\n\n\n\npython \u4ee3\u7801\u793a\u4f8b\n\n\nimport hashlib, hmac\ndef verify(appkey, token, timestamp, signature):\n    return signature == hmac.new(\n        key=appkey,\n        msg='{}{}'.format(timestamp, token),\n        digestmod=hashlib.sha256).hexdigest()\n\n\n\n\nJava \u4ee3\u7801\u793a\u4f8b\n (\u4f9d\u8d56 \napache codec\n)\n\n\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport org.apache.commons.codec.binary.Hex;\n\npublic boolean verify(String appkey, String token, long timestamp,\n            String signature) throws NoSuchAlgorithmException, InvalidKeyException {\n    Mac sha256HMAC = Mac.getInstance(\nHmacSHA256\n);\n    SecretKeySpec secretKey = new SecretKeySpec(appkey.getBytes(),\nHmacSHA256\n);\n    sha256HMAC.init(secretKey);\n    StringBuffer buf = new StringBuffer();\n    buf.append(timestamp).append(token);\n    String signatureCal = new String(Hex.encodeHex(sha256HMAC.doFinal(buf\n            .toString().getBytes())));\n    return signatureCal.equals(signature);\n}\n\n\n\n\n\u4e8b\u4ef6\u8bf4\u660e\n\n\n\u76ee\u524d SMSHook \u652f\u6301\u7684\u4e8b\u4ef6\u7c7b\u578b\u5305\u62ec: \u8bf7\u6c42, \u9001\u8fbe, \u5904\u7406\u5931\u8d25, \u53d1\u9001\u5931\u8d25.\n\n\n \u8bf7\u6c42 ( request )\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nevent\n\n\nstring\n\n\n\u4e8b\u4ef6\u7c7b\u578b:\"request\"\n\n\n\n\n\n\neventType\n\n\nint\n\n\n\u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:1\n\n\n\n\n\n\nmessage\n\n\nstring\n\n\n\u6d88\u606f\u5185\u5bb9\n\n\n\n\n\n\nsmsUser\n\n\nstring\n\n\nsmsUser\n\n\n\n\n\n\nsmsIds\n\n\nlist\n\n\n\u77ed\u4fe1ID\u7ec4\u6210\u7684\u6570\u7ec4\n\n\n\n\n\n\ntemplateId\n\n\nint\n\n\n\u6a21\u677fID\n\n\n\n\n\n\nphones\n\n\nlist\n\n\n\u624b\u673a\u53f7\u7ec4\u6210\u7684\u6570\u7ec4\n\n\n\n\n\n\ntimestamp\n\n\nlong\n\n\n\u65f6\u95f4\u6233\n\n\n\n\n\n\ntoken\n\n\nstring\n\n\n\u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32\n\n\n\n\n\n\nsignature\n\n\nstring\n\n\n\u7b7e\u540d\u5b57\u7b26\u4e32\n\n\n\n\n\n\nuserId\n\n\nint\n\n\n\u7528\u6237ID\n\n\n\n\n\n\nlabelId\n\n\nint\n\n\n\u9884\u7559, \u6682\u4e0d\u7528\n\n\n\n\n\n\n\n\nPOST \u6570\u636e\u793a\u4f8b\n\n\nsignature: 9eb24a034b655257a63c209b35b64b2a4ec5e894ed513c0410a3a6dc570aaaaa\nevent: request\nuserId: 19999\ntimestamp: 1434684323193\neventType: 1\ntemplateId: 29999\nmessage: request\nsmsUser: smsuser\nphones: [\n13888888888\n]\ntoken: nyFltYEluRVvYezFHJW1st2ewb71RVcVDiNN6GqvRnWtgDDDDD\nsmsIds: [\n1434684322919_95_1_1_9m9684$13888888888\n]\nlabelId: 0\n\n\n\n\n \u9001\u8fbe ( deliver )\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nevent\n\n\nstring\n\n\n\u4e8b\u4ef6\u7c7b\u578b:\"deliver\"\n\n\n\n\n\n\neventType\n\n\nint\n\n\n\u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:2\n\n\n\n\n\n\nmessage\n\n\nstring\n\n\n\u6d88\u606f\u5185\u5bb9\n\n\n\n\n\n\nsmsUser\n\n\nstring\n\n\nsmsUser\n\n\n\n\n\n\nsmsId\n\n\nint\n\n\n\u77ed\u4fe1ID\n\n\n\n\n\n\ntemplateId\n\n\nint\n\n\n\u6a21\u677fID\n\n\n\n\n\n\nphone\n\n\nstring\n\n\n\u624b\u673a\u53f7\n\n\n\n\n\n\ntimestamp\n\n\nlong\n\n\n\u65f6\u95f4\u6233\n\n\n\n\n\n\ntoken\n\n\nstring\n\n\n\u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32\n\n\n\n\n\n\nsignature\n\n\nstring\n\n\n\u7b7e\u540d\u5b57\u7b26\u4e32\n\n\n\n\n\n\nuserId\n\n\nint\n\n\n\u7528\u6237ID\n\n\n\n\n\n\nlabelId\n\n\nint\n\n\n\u9884\u7559, \u6682\u4e0d\u7528\n\n\n\n\n\n\n\n\nPOST \u6570\u636e\u793a\u4f8b\n\n\nsignature: e784e44949a403e952813bb7bb97d3fce422bbc2a2e2d90be7bba7b1689aaaaa\nphone: 13888888888\nevent: deliver\nuserId: 19999\ntimestamp: 1434684324073\nsmsUser: smsuser \ntemplateId: 29999\nmessage: Successfully delivered\neventType: 2\ntoken: uBHSaB9Jj7jN7VN05u11jXuDZT4KIvfMnfrHlIxOOekwUaaaaa\nsmsId: 1434684322919_95_1_1_9m9684$13888888888\nlabelId: 0\n\n\n\n\n \u5904\u7406\u5931\u8d25 ( workererror)\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nevent\n\n\nstring\n\n\n\u4e8b\u4ef6\u7c7b\u578b:\"workererror\"\n\n\n\n\n\n\neventType\n\n\nint\n\n\n\u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:4\n\n\n\n\n\n\nmessage\n\n\nstring\n\n\n\u6d88\u606f\u5185\u5bb9\n\n\n\n\n\n\nstatusCode\n\n\nint\n\n\n\u9519\u8bef\u7801\n\n\n\n\n\n\nsmsUser\n\n\nstring\n\n\nsmsUser\n\n\n\n\n\n\nsmsId\n\n\nint\n\n\n\u77ed\u4fe1ID\n\n\n\n\n\n\ntemplateId\n\n\nint\n\n\n\u6a21\u677fID\n\n\n\n\n\n\nphone\n\n\nstring\n\n\n\u624b\u673a\u53f7\n\n\n\n\n\n\ntimestamp\n\n\nlong\n\n\n\u65f6\u95f4\u6233\n\n\n\n\n\n\ntoken\n\n\nstring\n\n\n\u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32\n\n\n\n\n\n\nsignature\n\n\nstring\n\n\n\u7b7e\u540d\u5b57\u7b26\u4e32\n\n\n\n\n\n\nuserId\n\n\nint\n\n\n\u7528\u6237ID\n\n\n\n\n\n\nlabelId\n\n\nint\n\n\n\u9884\u7559, \u6682\u4e0d\u7528\n\n\n\n\n\n\n\n\nPOST \u6570\u636e\u793a\u4f8b\n\n\nevent: workererror\neventType: 4\ntoken: O9CDUhNXxw7y23hMCLSpveIS6VTDF7McFr0EMF0XuJleTAAAAA\nsignature: cddc66d39d357feae4993ea224eda165e13190640af1a004d2fb67be5a1aaaaa\nmessage: smsworker:address in unsubscribe list\nuserId: 19999\nsmsUser: smsuser\ntemplateId: 29999\nstatusCode: 430\nsmsId: 1434684949823_95_1_1_x3rfya$13888888888\nphone: 13888888888\ntimestamp: 1434684950692\nlabelId: 0\n\n\n\n\n \u53d1\u9001\u5931\u8d25 ( delivererror)\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u7c7b\u578b\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nevent\n\n\nstring\n\n\n\u4e8b\u4ef6\u7c7b\u578b:\"delivererror\"\n\n\n\n\n\n\neventType\n\n\nint\n\n\n\u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:5\n\n\n\n\n\n\nmessage\n\n\nstring\n\n\n\u6d88\u606f\u5185\u5bb9\n\n\n\n\n\n\nstatusCode\n\n\nint\n\n\n\u9519\u8bef\u7801\n\n\n\n\n\n\nsmsUser\n\n\nstring\n\n\nsmsUser\n\n\n\n\n\n\nsmsId\n\n\nint\n\n\n\u77ed\u4fe1ID\n\n\n\n\n\n\ntemplateId\n\n\nint\n\n\n\u6a21\u677fID\n\n\n\n\n\n\nphone\n\n\nstring\n\n\n\u624b\u673a\u53f7\n\n\n\n\n\n\ntimestamp\n\n\nlong\n\n\n\u65f6\u95f4\u6233\n\n\n\n\n\n\ntoken\n\n\nstring\n\n\n\u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32\n\n\n\n\n\n\nsignature\n\n\nstring\n\n\n\u7b7e\u540d\u5b57\u7b26\u4e32\n\n\n\n\n\n\nuserId\n\n\nint\n\n\n\u7528\u6237ID\n\n\n\n\n\n\nlabelId\n\n\nint\n\n\n\u9884\u7559, \u6682\u4e0d\u7528\n\n\n\n\n\n\n\n\nPOST \u6570\u636e\u793a\u4f8b\n\n\nevent: delivererror\neventType: 5\ntoken: ZqozWAlTLjosjb3yrCDxBttAQyfAdBFo5PxrhF5iGkqbCAAAAA\nsignature: 16699442298213ccf099b2b80a938e3cb7ec0e3c153b2fc185017c9958eaaaaa\nmessage: 12\nuserId: 19999\nsmsUser: smsuser\nstatusCode: 500\nsmsId: 1434685825229_95_1_1_o9amg7$13888888888\nphone: 13888888888\ntimestamp: 1434685829536\nlabelId: 0\ntemplateId: 29999", 
            "title": "Info"
        }, 
        {
            "location": "/sms/#_1", 
            "text": "\u77ed\u4fe1\u76ee\u524d\u53ea\u5bf9\u5185\u6d4b\u7528\u6237\u5f00\u653e\uff0c\u82e5\u8981\u4f7f\u7528\uff0c\u8bf7\u8054\u7cfb\u5728\u7ebf\u5ba2\u670d\uff08QQ 4000069990\uff09\u8fdb\u884c\u7533\u8bf7\u3002  \u76ee\u524d ConverLab \u7684\u77ed\u4fe1\u670d\u52a1\u53ea\u652f\u6301\u89e6\u53d1\u77ed\u4fe1  \u89e6\u53d1\u77ed\u4fe1 \uff1a\u7531\u7528\u6237\u884c\u4e3a\u89e6\u53d1\u751f\u4ea7, \u5982:\u52a8\u6001\u5bc6\u7801, \u624b\u673a\u9a8c\u8bc1, \u8ba2\u5355\u901a\u77e5\u7b49.", 
            "title": "\u77ed\u4fe1\u7c7b\u578b"
        }, 
        {
            "location": "/sms/#_2", 
            "text": "\u76ee\u524d ConverLab \u5bf9\u77ed\u4fe1\u4e1a\u52a1\u63d0\u4f9b WEBAPI \u7684\u63a5\u5165\u65b9\u5f0f, \u5f00\u53d1\u8005\u53ef\u4ee5\u5229\u7528 ConverLab \u63d0\u4f9b\u7684 HTTP \u63a5\u53e3, \u8c03\u7528 ConverLab \u7684\u670d\u52a1.   \u4f7f\u7528\u6211\u4eec\u7684\u77ed\u4fe1API, \u5f00\u53d1\u8005\u9700\u8981\u521b\u5efa:   SMS_USER   SMS_KEY  \u77ed\u4fe1\u6a21\u677f  \u7b7e\u540d    SMS_USER \u4e0e SMS_KEY   \u7528\u6237\u53ef\u4ee5\u901a\u8fc7 \u3010\u77ed\u4fe1\u9875\u9762\u3011-\u3010\u77ed\u4fe1\u8bbe\u7f6e\u3011-\u3010\u53d1\u9001\u6388\u6743\u3011 \u6765\u521b\u5efa SMS_USER, \u540c\u65f6 ConverLab \u4f1a\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684 SMS_KEY. \u76ee\u524d ConverLab \u53ea\u5141\u8bb8\u62e5\u6709\u4e00\u4e2a SMS_USER.  \u77ed\u4fe1\u6a21\u677f  \u77ed\u4fe1\u6a21\u677f, \u7528\u6237\u5728\u53d1\u9001\u77ed\u4fe1\u4e4b\u524d,\u5fc5\u987b\u5728\u524d\u53f0\u9875\u9762\u7f16\u8f91\u77ed\u4fe1\u5185\u5bb9, \u5e76\u63d0\u4ea4\u5ba1\u6838. \u5ba1\u6838\u901a\u8fc7\u540e, \u901a\u8fc7\u6a21\u677f\u7684 ID \u8c03\u7528\u53d1\u9001.   \u53d8\u91cf\u66ff\u6362  ConverLab \u652f\u6301\u5728\u77ed\u4fe1\u4e2d\u4f7f\u7528\u300c\u53d8\u91cf\u300d.  \u53d8\u91cf\u7684\u683c\u5f0f: \u9996\u5c3e\u4f7f\u7528  %  \u5305\u56f4, \u5373\u4e3a\u7528\u6237\u5b9a\u4e49\u7684\u4e00\u4e2a\u53d8\u91cf. \u4e3e\u4f8b:  \u6b22\u8fce\u4f7f\u7528\u7231\u53d1\u4fe1. \u60a8\u7684\u624b\u673a\u9a8c\u8bc1\u7801\u662f: %code%. # code\u662f\u53d8\u91cf  \u53d8\u91cf\u7684\u7528\u6cd5:   \u5728\u77ed\u4fe1\u6a21\u677f\u4e2d\u4f7f\u7528\u53d8\u91cf, \u4f5c\u4e3a\u5360\u4f4d\u7b26  \u5728\u77ed\u4fe1 API \u4e2d\u8bbe\u7f6e\u53d8\u91cf\u7684\u503c  ConverLab \u4f1a\u6839\u636e\u8bf7\u6c42\u53c2\u6570, \u6765\u66ff\u6362\u77ed\u4fe1\u5185\u5bb9\u4e2d\u76f8\u5e94\u53d8\u91cf\u7684\u503c  \u53d8\u91cf\u7684\u503c\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 32 \u4e2a\u5b57\u7b26, \u53d8\u91cf\u7684\u503c\u4e2d\u4e0d\u80fd\u542b\u6709 HTTP \u94fe\u63a5   \u7b7e\u540d  \u7531\u4e8e\u77ed\u4fe1\u53d1\u9001\u7684\u7279\u6b8a\u6027, \u4ee5\u53ca\u76f8\u5173\u7684 ISP \u673a\u6784\u7684\u5ba1\u67e5\u5236\u5ea6, \u77ed\u4fe1\u5185\u5bb9\u4e2d\u5fc5\u987b\u542b\u6709\u80fd\u8bf4\u660e\u53d1\u9001\u8005\u8eab\u4efd\u7684\u7b7e\u540d. \u76ee\u524d, ConverLab \u652f\u6301\u5728\u7f16\u8f91\u77ed\u4fe1\u6a21\u677f\u65f6\u6dfb\u52a0\u7b7e\u540d, \u5e76\u8bbe\u7f6e\u7b7e\u540d\u4f4d\u7f6e(\u76ee\u524d\u53ea\u652f\u6301\u7b7e\u540d\u5728\u77ed\u4fe1\u5c3e\u90e8).  \u6ce8\u610f:\n\u77ed\u4fe1\u6a21\u677f\u5fc5\u987b\u542b\u6709\u300c\u7b7e\u540d\u300d, \u5426\u5219\u4e0d\u80fd\u901a\u8fc7\u5ba1\u6838. \u76ee\u524d\u7528\u6237\u53ea\u80fd\u62e5\u67091\u4e2a\u7b7e\u540d.", 
            "title": "\u63a5\u5165\u65b9\u5f0f"
        }, 
        {
            "location": "/sms/#_3", 
            "text": "\u4e3a\u51cf\u5c11\u7528\u6237\u5bf9\u7a7a\u53f7, \u505c\u673a\u7b49\u624b\u673a\u53f7\u7801\u7684\u65e0\u6548\u53d1\u9001, ConverLab \u4f1a\u6839\u636e\u8fd0\u8425\u5546\u53cd\u9988\u7684\u53d1\u9001\u7ed3\u679c\u6765\u505a\u76f8\u5e94\u7684\u62e6\u622a\u5904\u7406.  \u6240\u6709 \u53d1\u9001\u5931\u8d25 \u7684\u624b\u673a\u53f7\u7801\u90fd\u4f1a\u8fdb\u5165\u62e6\u622a\u5217\u8868, \u62e6\u622a\u5217\u8868\u8bb0\u5f55\u7684\u5b57\u6bb5\u5982\u4e0b:    \u624b\u673a\u53f7\u7801: \u62e6\u622a\u7684\u624b\u673a\u53f7\u7801  \u62e6\u622a\u65f6\u95f4: \u6b64\u65f6\u95f4\u4e4b\u540e\u7684\u53d1\u9001\u4f1a\u88ab ConverLab \u62e6\u622a  \u5931\u6548\u65f6\u95f4: \u6b64\u65f6\u95f4\u4e4b\u540e\u7684\u53d1\u9001\u6062\u590d\u6b63\u5e38  \u539f\u56e0: \u8fd0\u8425\u5546\u53cd\u9988\u7684\u53d1\u9001\u7ed3\u679c\u660e\u7ec6   \u4e0d\u540c\u7684\u5931\u8d25\u539f\u56e0\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u62e6\u622a\u65f6\u95f4, \u4e0d\u540c\u7684\u62e6\u622a\u8303\u56f4, \u8be6\u7ec6\u89c1\u4e0b\u8868:      \u8fd4\u56de\u7801  \u5931\u8d25\u63cf\u8ff0  \u62e6\u622a\u65f6\u95f4  \u5168\u5c40,\u5c40\u90e8  \u7528\u6237\u662f\u5426\u53ef\u5220\u9664      500  \u53d1\u9001\u5931\u8d25, \u624b\u673a\u7a7a\u53f7  30 \u5929  \u5168\u5c40\u62e6\u622a  \u662f    510  \u53d1\u9001\u5931\u8d25, \u624b\u673a\u505c\u673a  1 \u5c0f\u65f6  \u5168\u5c40\u62e6\u622a  \u662f    550  \u53d1\u9001\u5931\u8d25, \u8be5\u6a21\u677f\u5185\u5bb9\u88ab\u6295\u8bc9  1 \u5c0f\u65f6  \u5c40\u90e8\u62e6\u622a  \u662f    580  \u53d1\u9001\u5931\u8d25, \u624b\u673a\u5173\u673a  0 \u79d2  \u662f     590  \u53d1\u9001\u5931\u8d25, \u5176\u4ed6\u539f\u56e0  0 \u79d2  \u662f      \u5168\u5c40\u62e6\u622a: \u6b64\u6761\u62e6\u622a\u8bb0\u5f55\u4f1a\u5bf9 ConverLab \u6240\u6709\u7528\u6237\u751f\u6548.   \u5c40\u90e8\u62e6\u622a: \u6b64\u6761\u62e6\u622a\u8bb0\u5f55\u53ea\u4f1a\u5bf9\u6765\u6e90\u7528\u6237\u751f\u6548.  \u7528\u6237\u53ef\u4ee5\u5728\u62e6\u622a\u5217\u8868\u4e2d\u5220\u9664 \u6765\u6e90\u662f\u81ea\u5df1 \u7684\u8bb0\u5f55, \u5bf9\u4e8e \u6765\u6e90\u4e0d\u662f\u81ea\u5df1 \u7684\u62e6\u622a\u624b\u673a\u53f7, \u53ef\u4ee5\u5728\u786e\u8ba4\u624b\u673a\u53f7\u901a\u8baf\u6b63\u5e38\u4e4b\u540e, \u8054\u7cfb\u5ba2\u670d\u5904\u7406.", 
            "title": "\u62e6\u622a\u5217\u8868"
        }, 
        {
            "location": "/sms/#api", 
            "text": "\u77ed\u4fe1\u53d1\u9001\u4f7f\u7528 \u6570\u5b57\u7b7e\u540d \u7684\u9a8c\u8bc1\u6a21\u5f0f. \u8fd9\u79cd\u6a21\u5f0f\u80fd\u591f\u6709\u6548\u907f\u514d\u5bc6\u7801\u5728\u4f20\u8f93\u9014\u4e2d\u7684\u6cc4\u9732, \u662f\u5b89\u5168\u7ea7\u522b\u5f88\u9ad8\u7684\u4e00\u79cd\u52a0\u5bc6\u9a8c\u8bc1\u65b9\u5f0f.  \u6570\u5b57\u7b7e\u540d \u7684\u9a8c\u8bc1\u6a21\u5f0f: \u8c03\u7528 API \u65f6, \u7528\u6237\u4e0d\u9700\u8981\u628a\u5bc6\u7801 ( SMS_KEY ) \u4f5c\u4e3a\u53c2\u6570\u660e\u6587\u4f20\u8f93, \u800c\u662f\u5c06\u6570\u5b57\u7b7e\u540d ( signature ) \u4f5c\u4e3a\u53c2\u6570\u4f20\u8f93\u7ed9\u670d\u52a1\u5668. \u670d\u52a1\u5668\u7aef\u4f1a\u9a8c\u8bc1\u6b64 signature \u7684\u6b63\u786e\u6027.  \u751f\u6210 \u6570\u5b57\u7b7e\u540d  ( signature ) \u7684\u65b9\u6cd5:   1. \u5c06\u5b9e\u9645\u8c03\u7528API\u7684\u53c2\u6570\u4ee5\u5b57\u6bcd\u5347\u5e8f(A-Z)\u6392\u5217, \u4e0d\u5305\u62ec smsKey \u548c signature \u5b57\u6bb5\u672c\u8eab\n2. \u6309\u7167\u6392\u5217\u4e4b\u540e\u7684\u987a\u5e8f, \u4ee5 'key=value' + ' ' + 'key=value' \u7684\u65b9\u5f0f\u8fde\u63a5\u6240\u6709\u53c2\u6570, \n   \u5f97\u5230\u5b57\u7b26\u4e32 param_str\n3. \u4ee5 SMS_KEY + ' ' + param_str + ' ' + SMS_KEY \u7684\u65b9\u5f0f\u5f97\u5230\u5b57\u7b26\u4e32 sign_str\n4. \u8ba1\u7b97 sign_str \u7684MD5\u503c (32\u4f4d, \u4e0d\u533a\u5206\u5927\u5c0f\u5199), \u5f97\u5230 signature\n\n\u63d0\u793a:\n1. \u751f\u6210\u7b7e\u540d\u65f6, \u53c2\u6570\u4e0d\u8981\u4f7f\u7528 'urlencode'. \u5728\u8c03\u7528 api \u65f6, \u624d\u9700\u8981\u5bf9\u53c2\u6570\u505a 'urlencode'\n2. ' ' \u662f\u4ee3\u7801\u4e2d\u4f7f\u7528\u7684\u8fde\u63a5\u7b26, '+'\u662f\u6587\u6863\u663e\u793a\u4e4b\u7528  \u4e0b\u9762\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4ee3\u7801\u793a\u4f8b ( python ):  import hashlib\n\nSMS_USER = 'testuser'\nSMS_KEY = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\nparam = {\n    'smsUser': SMS_USER,\n    'templateId' : 1,\n    'phone'  : 18888888888,\n    'vars'   : {},\n}\n\nparam_keys = list(param.keys())\nparam_keys.sort()\n\nparam_str = ''\n\nfor key in param_keys:\n    param_str += key + '=' + str(param[key]) + ' '\n\nparam_str = param_str[:-1]\n\nsign_str = SMS_KEY + ' ' + param_str + ' ' + SMS_KEY\nsignature = hashlib.md5(sign_str).hexdigest()  \u63d0\u793a : \u6240\u6709\u7684 API \u90fd\u652f\u6301 HTTPS.   timestamp \u65f6\u95f4\u6233 ( \u63d0\u5347\u903c\u683c )  \u7528\u6237\u53ef\u4ee5\u5728\u6bcf\u4e2a API \u8bf7\u6c42\u4e2d\u52a0\u5165 timestamp \u53c2\u6570, ConverLab \u4f1a\u68c0\u67e5 timestamp \u548c \u670d\u52a1\u5668\u5f53\u524d\u65f6\u95f4, \u5982\u679c\u4e24\u8005\u76f8\u5dee\u5927\u4e8e6\u79d2, \u5219\u8bf7\u6c42\u4f1a\u88ab\u62d2\u7edd.  \u7528\u6237\u9700\u8981\u901a\u8fc7\u8c03\u7528 API \u6765\u83b7\u53d6 ConverLab \u670d\u52a1\u5668\u7684\u65f6\u95f4\u6233, \u800c\u4e0d\u662f\u81ea\u5df1\u7684\u672c\u5730\u65f6\u95f4.  timestamp \u53c2\u6570\u9700\u8981\u88ab\u5305\u542b\u5728 signature \u4e2d, \u53c2\u4e0e\u751f\u6210\u6570\u5b57\u7b7e\u540d.", 
            "title": "API \u9a8c\u8bc1\u673a\u5236"
        }, 
        {
            "location": "/sms/#smshook", 
            "text": "", 
            "title": "SMSHook"
        }, 
        {
            "location": "/sms/#smshook_1", 
            "text": "\u7528\u6237\u5c06\u77ed\u4fe1\u8bf7\u6c42\u53d1\u9001\u7ed9 ConverLab \u4e4b\u540e, ConverLab \u4f1a\u628a\u300c\u8bf7\u6c42\u7ed3\u679c\u300d\u540c\u6b65\u8fd4\u56de\u7ed9\u7528\u6237, \u800c\u77ed\u4fe1\u7684\u300c\u53d1\u9001\u7ed3\u679c\u300d\u548c \u300c\u5176\u4ed6\u4e8b\u4ef6\u7ed3\u679c\u300d\u662f\u901a\u8fc7 SMSHook \u5f02\u6b65\u8fd4\u56de\u7ed9\u7528\u6237\u7684.   ConverLab \u4e3a\u5ba2\u6237\u63d0\u4f9b\u4e86\u4e00\u4e9b\u77ed\u4fe1\u4e8b\u4ef6, \u5ba2\u6237\u53ef\u4ee5\u9009\u62e9\u5173\u6ce8\u67d0\u4e9b\u4e8b\u4ef6  \u5f53\u67d0\u4e8b\u4ef6\u53d1\u751f, \u5c31\u4f1a\u89e6\u53d1 ConverLab \u5411\u5ba2\u6237\u8bbe\u7f6e\u7684 URL \u53d1\u9001\u6570\u636e ( POST )  \u5ba2\u6237\u6536\u5230\u6570\u636e, \u89e3\u6790\u51fa\u4e8b\u4ef6\u548c\u6570\u636e, \u505a\u540e\u7eed\u7684\u5904\u7406   \u76ee\u524d ConverLab \u652f\u6301\u7684\u77ed\u4fe1\u4e8b\u4ef6\u5982\u4e0b:     \u4e8b\u4ef6  \u89e6\u53d1\u6761\u4ef6      \u8bf7\u6c42(request)  \u77ed\u4fe1\u8bf7\u6c42\u6210\u529f    \u9001\u8fbe(deliver)  \u77ed\u4fe1\u53d1\u9001\u6210\u529f    \u5904\u7406\u5931\u8d25(workererror)  \u77ed\u4fe1\u5904\u7406\u5931\u8d25    \u53d1\u9001\u5931\u8d25(delivererror)  \u77ed\u4fe1\u53d1\u9001\u5931\u8d25    \u56de\u590d(reply)  \u7528\u6237\u56de\u590d (\u5f00\u53d1\u4e2d)     \u4f7f\u7528\u65b9\u6cd5:   \u7528\u6237\u81ea\u884c\u7f16\u5199 HTTP \u670d\u52a1, \u4f7f\u4e4b\u80fd\u591f\u5904\u7406\u76f8\u5e94\u7684\u4e8b\u4ef6, \u89e3\u6790\u76f8\u5173\u6570\u636e, \u5e76\u5f00\u653e\u51fa\u76f8\u5e94URL  \u7528\u6237\u5728 ConverLab \u7684  \u3010\u77ed\u4fe1\u3011- \u3010\u77ed\u4fe1\u8bbe\u7f6e\u3011-\u3010SMSHook\u3011  \u4e2d\u9009\u62e9\u5173\u6ce8\u7684\u4e8b\u4ef6, \u914d\u7f6e\u63a5\u6536\u6570\u636e\u7684 URL   \u6ce8\u610f: \u6211\u4eec\u4f1a\u5bf9\u7528\u6237\u63d0\u4f9b\u7684 URL \u505a\u68c0\u6d4b. \u9700\u8981\u6b64 HTTP \u670d\u52a1\u80fd\u591f\u6b63\u786e\u54cd\u5e94 get | post \u8bf7\u6c42, \u5e76\u4e14\u4fdd\u8bc1\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801 \u4e3a 200", 
            "title": "SMSHook \u673a\u5236"
        }, 
        {
            "location": "/sms/#_4", 
            "text": "\u4e3a\u4e86\u786e\u4fdd\u6d88\u606f\u7684\u6765\u6e90\u8eab\u4efd\u662f ConverLab,  \u4f60\u53ef\u4ee5\u9009\u62e9\u5bf9 POST \u6570\u636e\u7684\u6765\u6e90\u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1. ( \u4e0d\u9a8c\u8bc1, \u76f4\u63a5\u89e3\u6790 POST \u7684\u6570\u636e\u4e5f\u53ef\u4ee5 ).   \u5b89\u5168\u8ba4\u8bc1\u7684\u65b9\u6cd5\u5982\u4e0b:   \u901a\u8fc7 \u3010\u77ed\u4fe1\u3011- \u3010\u77ed\u4fe1\u8bbe\u7f6e\u3011-\u3010SMSHook\u3011 \u83b7\u53d6  APP KEY  \u89e3\u6790\u51fa POST \u6570\u636e\u4e2d\u7684  token ,  timestamp  \u548c  signature  \u4f7f\u7528  APP KEY ,  token  \u548c  timestamp  \u751f\u6210\u7b7e\u540d  signature , \u4e0e POST \u6570\u636e\u4e2d\u7684  signature  \u8fdb\u884c\u6821\u9a8c ( \u7b7e\u540d\u7b97\u6cd5:  SHA256 )   python \u4ee3\u7801\u793a\u4f8b  import hashlib, hmac\ndef verify(appkey, token, timestamp, signature):\n    return signature == hmac.new(\n        key=appkey,\n        msg='{}{}'.format(timestamp, token),\n        digestmod=hashlib.sha256).hexdigest()  Java \u4ee3\u7801\u793a\u4f8b  (\u4f9d\u8d56  apache codec )  import javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport org.apache.commons.codec.binary.Hex;\n\npublic boolean verify(String appkey, String token, long timestamp,\n            String signature) throws NoSuchAlgorithmException, InvalidKeyException {\n    Mac sha256HMAC = Mac.getInstance( HmacSHA256 );\n    SecretKeySpec secretKey = new SecretKeySpec(appkey.getBytes(), HmacSHA256 );\n    sha256HMAC.init(secretKey);\n    StringBuffer buf = new StringBuffer();\n    buf.append(timestamp).append(token);\n    String signatureCal = new String(Hex.encodeHex(sha256HMAC.doFinal(buf\n            .toString().getBytes())));\n    return signatureCal.equals(signature);\n}", 
            "title": "\u7b7e\u540d\u9a8c\u8bc1"
        }, 
        {
            "location": "/sms/#_5", 
            "text": "\u76ee\u524d SMSHook \u652f\u6301\u7684\u4e8b\u4ef6\u7c7b\u578b\u5305\u62ec: \u8bf7\u6c42, \u9001\u8fbe, \u5904\u7406\u5931\u8d25, \u53d1\u9001\u5931\u8d25.   \u8bf7\u6c42 ( request )  \u53c2\u6570\u8bf4\u660e     \u53c2\u6570  \u7c7b\u578b  \u8bf4\u660e      event  string  \u4e8b\u4ef6\u7c7b\u578b:\"request\"    eventType  int  \u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:1    message  string  \u6d88\u606f\u5185\u5bb9    smsUser  string  smsUser    smsIds  list  \u77ed\u4fe1ID\u7ec4\u6210\u7684\u6570\u7ec4    templateId  int  \u6a21\u677fID    phones  list  \u624b\u673a\u53f7\u7ec4\u6210\u7684\u6570\u7ec4    timestamp  long  \u65f6\u95f4\u6233    token  string  \u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32    signature  string  \u7b7e\u540d\u5b57\u7b26\u4e32    userId  int  \u7528\u6237ID    labelId  int  \u9884\u7559, \u6682\u4e0d\u7528     POST \u6570\u636e\u793a\u4f8b  signature: 9eb24a034b655257a63c209b35b64b2a4ec5e894ed513c0410a3a6dc570aaaaa\nevent: request\nuserId: 19999\ntimestamp: 1434684323193\neventType: 1\ntemplateId: 29999\nmessage: request\nsmsUser: smsuser\nphones: [ 13888888888 ]\ntoken: nyFltYEluRVvYezFHJW1st2ewb71RVcVDiNN6GqvRnWtgDDDDD\nsmsIds: [ 1434684322919_95_1_1_9m9684$13888888888 ]\nlabelId: 0   \u9001\u8fbe ( deliver )  \u53c2\u6570\u8bf4\u660e     \u53c2\u6570  \u7c7b\u578b  \u8bf4\u660e      event  string  \u4e8b\u4ef6\u7c7b\u578b:\"deliver\"    eventType  int  \u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:2    message  string  \u6d88\u606f\u5185\u5bb9    smsUser  string  smsUser    smsId  int  \u77ed\u4fe1ID    templateId  int  \u6a21\u677fID    phone  string  \u624b\u673a\u53f7    timestamp  long  \u65f6\u95f4\u6233    token  string  \u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32    signature  string  \u7b7e\u540d\u5b57\u7b26\u4e32    userId  int  \u7528\u6237ID    labelId  int  \u9884\u7559, \u6682\u4e0d\u7528     POST \u6570\u636e\u793a\u4f8b  signature: e784e44949a403e952813bb7bb97d3fce422bbc2a2e2d90be7bba7b1689aaaaa\nphone: 13888888888\nevent: deliver\nuserId: 19999\ntimestamp: 1434684324073\nsmsUser: smsuser \ntemplateId: 29999\nmessage: Successfully delivered\neventType: 2\ntoken: uBHSaB9Jj7jN7VN05u11jXuDZT4KIvfMnfrHlIxOOekwUaaaaa\nsmsId: 1434684322919_95_1_1_9m9684$13888888888\nlabelId: 0   \u5904\u7406\u5931\u8d25 ( workererror)  \u53c2\u6570\u8bf4\u660e     \u53c2\u6570  \u7c7b\u578b  \u8bf4\u660e      event  string  \u4e8b\u4ef6\u7c7b\u578b:\"workererror\"    eventType  int  \u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:4    message  string  \u6d88\u606f\u5185\u5bb9    statusCode  int  \u9519\u8bef\u7801    smsUser  string  smsUser    smsId  int  \u77ed\u4fe1ID    templateId  int  \u6a21\u677fID    phone  string  \u624b\u673a\u53f7    timestamp  long  \u65f6\u95f4\u6233    token  string  \u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32    signature  string  \u7b7e\u540d\u5b57\u7b26\u4e32    userId  int  \u7528\u6237ID    labelId  int  \u9884\u7559, \u6682\u4e0d\u7528     POST \u6570\u636e\u793a\u4f8b  event: workererror\neventType: 4\ntoken: O9CDUhNXxw7y23hMCLSpveIS6VTDF7McFr0EMF0XuJleTAAAAA\nsignature: cddc66d39d357feae4993ea224eda165e13190640af1a004d2fb67be5a1aaaaa\nmessage: smsworker:address in unsubscribe list\nuserId: 19999\nsmsUser: smsuser\ntemplateId: 29999\nstatusCode: 430\nsmsId: 1434684949823_95_1_1_x3rfya$13888888888\nphone: 13888888888\ntimestamp: 1434684950692\nlabelId: 0   \u53d1\u9001\u5931\u8d25 ( delivererror)  \u53c2\u6570\u8bf4\u660e     \u53c2\u6570  \u7c7b\u578b  \u8bf4\u660e      event  string  \u4e8b\u4ef6\u7c7b\u578b:\"delivererror\"    eventType  int  \u4e8b\u4ef6\u7c7b\u578b\u4ee3\u7801:5    message  string  \u6d88\u606f\u5185\u5bb9    statusCode  int  \u9519\u8bef\u7801    smsUser  string  smsUser    smsId  int  \u77ed\u4fe1ID    templateId  int  \u6a21\u677fID    phone  string  \u624b\u673a\u53f7    timestamp  long  \u65f6\u95f4\u6233    token  string  \u968f\u673a\u4ea7\u751f\u7684\u957f\u5ea6\u4e3a50\u7684\u5b57\u7b26\u4e32    signature  string  \u7b7e\u540d\u5b57\u7b26\u4e32    userId  int  \u7528\u6237ID    labelId  int  \u9884\u7559, \u6682\u4e0d\u7528     POST \u6570\u636e\u793a\u4f8b  event: delivererror\neventType: 5\ntoken: ZqozWAlTLjosjb3yrCDxBttAQyfAdBFo5PxrhF5iGkqbCAAAAA\nsignature: 16699442298213ccf099b2b80a938e3cb7ec0e3c153b2fc185017c9958eaaaaa\nmessage: 12\nuserId: 19999\nsmsUser: smsuser\nstatusCode: 500\nsmsId: 1434685825229_95_1_1_o9amg7$13888888888\nphone: 13888888888\ntimestamp: 1434685829536\nlabelId: 0\ntemplateId: 29999", 
            "title": "\u4e8b\u4ef6\u8bf4\u660e"
        }, 
        {
            "location": "/sms/api/", 
            "text": "send\n\n\n\u53d1\u9001\u4e00\u4e2a\u77ed\u4fe1\u6a21\u677f\u7ed9\u4e00\u4e2a\u7528\u6237\n\n\nURL\n\n\nhttp://sendcloud.sohu.com/smsapi/send\n\n\n\n\n\u8fd4\u56de\u6570\u636e\u683c\u5f0f\n\n\njson\n\n\n\n\nHTTP\u8bf7\u6c42\u65b9\u5f0f\n    \n\n\nGET POST    \n\n\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u7c7b\u578b\n\n\n\u5fc5\u9009\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nsmsUser\n\n\nstring\n\n\n\u662f\n\n\n\u5b50\u8d26\u53f7\n\n\n\n\n\n\ntemplateId\n\n\nint\n\n\n\u662f\n\n\n\u6a21\u677fID\n\n\n\n\n\n\nphone\n\n\nstring\n\n\n\u662f\n\n\n\u6536\u4fe1\u4eba\u624b\u673a\u53f7\n\n\n\n\n\n\nvars\n\n\nstring\n\n\n\u5426\n\n\n\u66ff\u6362\u53d8\u91cf\u7684json\u4e32\n\n\n\n\n\n\nsignature\n\n\nstring\n\n\n\u662f\n\n\n\u7b7e\u540d, \u5408\u6cd5\u6027\u9a8c\u8bc1\n\n\n\n\n\n\ntimestamp\n\n\nstring\n\n\n\u5426\n\n\nUNIX\u65f6\u95f4\u6233\n\n\n\n\n\n\n\n\nvars\u683c\u5f0f\u793a\u4f8b:\n\n\n{\"name\": \"lucy\"} or {\"%name%\": \"lucy\"}\n\n\n\n\u6ce8\u610f\n: \n\n\n\n\n\n\n\u53c2\u6570 vars \u53ef\u80fd\u542b\u6709\u7279\u6b8a\u5b57\u7b26, \u8bb0\u5f97 \nurlencode\n\n\n\n\n\n\nvars \u6240\u4f20\u9012\u7684\u53d8\u91cf\u7684\u503c, \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 32 \u4e2a\u5b57\u7b26, \u53d8\u91cf\u4e2d\u4e0d\u80fd\u542b\u6709 HTTP \u94fe\u63a5\n\n\n\n\n\n\n\u751f\u6210\u7b7e\u540d\u65f6, \u53c2\u6570\u4e0d\u8981\u4f7f\u7528 \nurlencode\n. \u5728\u8c03\u7528 api \u65f6, \u624d\u9700\u8981\u5bf9\u53c2\u6570\u505a \nurlencode\n\n\n\n\n\n\n\n\nsendn (\u6682\u4e0d\u5f00\u901a)\n\n\n\u53d1\u9001\u4e00\u4e2a\u77ed\u4fe1\u6a21\u677f\u7ed9\u591a\u4e2a\u7528\u6237, \u6bcf\u4e2a\u7528\u6237\u5bf9\u5e94\u4e00\u4e2a\u66ff\u6362\u53d8\u91cf.\n\n\nURL\n\n\nhttp://sendcloud.sohu.com/smsapi/sendn\n\n\n\n\n\u8fd4\u56de\u6570\u636e\u683c\u5f0f\n\n\njson\n\n\n\n\nHTTP\u8bf7\u6c42\u65b9\u5f0f\n    \n\n\nGET POST    \n\n\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u7c7b\u578b\n\n\n\u5fc5\u9009\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nsmsUser\n\n\nstring\n\n\n\u662f\n\n\n\u5b50\u8d26\u53f7\n\n\n\n\n\n\ntemplateId\n\n\nint\n\n\n\u662f\n\n\n\u6a21\u677fID\n\n\n\n\n\n\ntos\n\n\nstring\n\n\n\u662f\n\n\n\u624b\u673a\u53f7\u548c\u66ff\u6362\u53d8\u91cf\u7684\u5bf9\u5e94\u7684json\u4e32\n\n\n\n\n\n\nsignature\n\n\nstring\n\n\n\u662f\n\n\n\u7b7e\u540d, \u5408\u6cd5\u6027\u9a8c\u8bc1\n\n\n\n\n\n\ntimestamp\n\n\nstring\n\n\n\u5426\n\n\nUNIX\u65f6\u95f4\u6233\n\n\n\n\n\n\n\n\nvars\u683c\u5f0f\u793a\u4f8b:\n\n\n{\"name\": \"lucy\"} or {\"%name%\": \"lucy\"}\n\n\n\ntos\u683c\u5f0f\u793a\u4f8b:\n\n\n[{\"phone\": \"13111111111\", \"vars\": {\"%name%\": \"name1\"}}, {\"phone\": \"13122222222\", \"vars\": {\"%name%\": \"name2\"}}]\n\n\n\n\u6ce8\u610f\n: \n\n\n\n\n\n\n\u53c2\u6570 vars \u53ef\u80fd\u542b\u6709\u7279\u6b8a\u5b57\u7b26, \u8bb0\u5f97 \nurlencode\n\n\n\n\n\n\nvars \u6240\u4f20\u9012\u7684\u53d8\u91cf\u7684\u503c, \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 32 \u4e2a\u5b57\u7b26, \u53d8\u91cf\u4e2d\u4e0d\u80fd\u542b\u6709 HTTP \u94fe\u63a5\n\n\n\n\n\n\n\u751f\u6210\u7b7e\u540d\u65f6, \u53c2\u6570\u4e0d\u8981\u4f7f\u7528 \nurlencode\n. \u5728\u8c03\u7528 api \u65f6, \u624d\u9700\u8981\u5bf9\u53c2\u6570\u505a \nurlencode\n\n\n\n\n\n\n\n\ntimestamp\n\n\n\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\u6233\n\n\nURL\n\n\nhttp://sendcloud.sohu.com/smsapi/timestamp/get\n\n\n\n\n\u8fd4\u56de\u6570\u636e\u683c\u5f0f\n\n\njson\n\n\n\n\nHTTP\u8bf7\u6c42\u65b9\u5f0f\n    \n\n\nGET\n\n\n\n\n\u53c2\u6570\u8bf4\u660e\n\n\n\u65e0\n\n\n\n\n\u8fd4\u56de\u7801\n\n\n\u77ed\u4fe1 API \u8fd4\u56de\u7684\u7ed3\u679c\u662f JSON \u683c\u5f0f, \u793a\u4f8b\u5982\u4e0b: \n\n\n# \u8bf7\u6c42\u6210\u529f\n{\n    \nmessage\n:\n\u8bf7\u6c42\u6210\u529f\n,\n    \ninfo\n:{},\n    \nresult\n:true,\n    \nstatusCode\n:200\n}\n\n# \u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\n{\n    \nmessage\n:\n\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\n,\n    \ninfo\n:{},\n    \nresult\n:false,\n    \nstatusCode\n:412\n}\n\n# \u90e8\u5206\u6210\u529f\n{\n    \nmessage\n:\n\u90e8\u5206\u6210\u529f\n,\n    \ninfo\n:{\n            \nsuccessCount\n:1,\n            \nfailedCount\n:1,\n            \nitems\n:[{\nphone\n:\n1312222\n,\nvars\n:{},\nmessage\n:\n\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\n}]\n            },\n    \nresult\n:true,\n    \nstatusCode\n:311\n}\n\n\n\n\n\n\n\nresult: API \u8bf7\u6c42\u662f\u5426\u6210\u529f\n\n\nstatusCode: API \u8fd4\u56de\u7801\n\n\nmessage: API \u8fd4\u56de\u7801\u7684\u4e2d\u6587\u89e3\u91ca\n\n\ninfo: \u66f4\u591a\u4fe1\u606f, \u6bd4\u5982: \n\u90e8\u5206\u6210\u529f\n\u5219\u8fd4\u56de\u5177\u4f53\u5931\u8d25\u4fe1\u606f, \n\u83b7\u53d6\u65f6\u95f4\u6233\n\u5219\u8fd4\u56de\u65f6\u95f4\u6233\u7684\u503c\n\n\n\n\n\n\n\n\n\n\nAPI \u8fd4\u56de\u7801\n\n\n\u542b\u4e49\n\n\n\n\n\n\n\n\n\n\n200\n\n\n\u8bf7\u6c42\u6210\u529f\n\n\n\n\n\n\n311\n\n\n\u90e8\u5206\u53f7\u7801\u8bf7\u6c42\u6210\u529f\n\n\n\n\n\n\n411\n\n\n\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a\n\n\n\n\n\n\n412\n\n\n\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\n\n\n\n\n\n\n413\n\n\n\u6709\u91cd\u590d\u7684\u624b\u673a\u53f7\n\n\n\n\n\n\n421\n\n\n\u7b7e\u540d\u53c2\u6570\u9519\u8bef\n\n\n\n\n\n\n422\n\n\n\u7b7e\u540d\u9519\u8bef\n\n\n\n\n\n\n431\n\n\n\u6a21\u677f\u4e0d\u5b58\u5728\n\n\n\n\n\n\n432\n\n\n\u6a21\u677f\u672a\u63d0\u4ea4\u5ba1\u6838\u6216\u8005\u672a\u5ba1\u6838\u901a\u8fc7\n\n\n\n\n\n\n433\n\n\n\u6a21\u677fID\u4e0d\u80fd\u4e3a\u7a7a\n\n\n\n\n\n\n441\n\n\n\u66ff\u6362\u53d8\u91cf\u683c\u5f0f\u9519\u8bef\n\n\n\n\n\n\n451\n\n\n\u5b9a\u65f6\u53d1\u9001\u65f6\u95f4\u7684\u683c\u5f0f\u9519\u8bef\n\n\n\n\n\n\n452\n\n\n\u5b9a\u65f6\u53d1\u9001\u65f6\u95f4\u65e9\u4e8e\u670d\u52a1\u5668\u65f6\u95f4, \u65f6\u95f4\u5df2\u8fc7\u53bb\n\n\n\n\n\n\n461\n\n\n\u65f6\u95f4\u6233\u65e0\u6548, \u4e0e\u670d\u52a1\u5668\u65f6\u95f4\u95f4\u9694\u5927\u4e8e6\u79d2\n\n\n\n\n\n\n471\n\n\nsmsUser\u4e0d\u5b58\u5728\n\n\n\n\n\n\n472\n\n\nsmsUser\u4e0d\u80fd\u4e3a\u7a7a\n\n\n\n\n\n\n473\n\n\n\u6ca1\u6709\u6743\u9650, \u514d\u8d39\u7528\u6237\u4e0d\u80fd\u53d1\u9001\u77ed\u4fe1\n\n\n\n\n\n\n474\n\n\n\u7528\u6237\u4e0d\u5b58\u5728\n\n\n\n\n\n\n481\n\n\n\u624b\u673a\u53f7\u548c\u66ff\u6362\u53d8\u91cf\u4e0d\u80fd\u4e3a\u7a7a\n\n\n\n\n\n\n482\n\n\n\u624b\u673a\u53f7\u548c\u66ff\u6362\u53d8\u91cf\u683c\u5f0f\u9519\u8bef\n\n\n\n\n\n\n483\n\n\n\u66ff\u6362\u53d8\u91cf\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc732\u4e2a\u5b57\u7b26\n\n\n\n\n\n\n497\n\n\n\u4e94\u5206\u949f\u5185\u7ed9\u5f53\u524d\u624b\u673a\u53f7\u53d1\u4fe1\u592a\u591a\n\n\n\n\n\n\n498\n\n\n\u4e00\u5929\u5185\u7ed9\u5f53\u524d\u624b\u673a\u53f7\u53d1\u4fe1\u592a\u591a\n\n\n\n\n\n\n499\n\n\n\u8d26\u6237\u989d\u5ea6\u4e0d\u591f\n\n\n\n\n\n\n501\n\n\n\u670d\u52a1\u5668\u5f02\u5e38\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSMSHook \u9519\u8bef\u7801(statusCode)\n\n\n\u542b\u4e49\n\n\n\n\n\n\n\n\n\n\n410\n\n\n\u5904\u7406\u5931\u8d25, \u624b\u673a\u53f7\u5728\u5168\u5c40\u62e6\u622a\u5217\u8868\n\n\n\n\n\n\n420\n\n\n\u5904\u7406\u5931\u8d25, \u624b\u673a\u53f7\u5728\u5c40\u90e8\u62e6\u622a\u5217\u8868\n\n\n\n\n\n\n430\n\n\n\u5904\u7406\u5931\u8d25, \u53d6\u6d88\u8ba2\u9605\n\n\n\n\n\n\n440\n\n\n\u5904\u7406\u5931\u8d25, \u5173\u952e\u8bcd\u8fc7\u6ee4\n\n\n\n\n\n\n450\n\n\n\u5904\u7406\u5931\u8d25, \u66ff\u6362\u53d8\u91cf\u9519\u8bef\n\n\n\n\n\n\n460\n\n\n\u5904\u7406\u5931\u8d25, \u77ed\u4fe1\u5185\u5bb9\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\n\n\n\n\n\n\n500\n\n\n\u53d1\u9001\u5931\u8d25, \u624b\u673a\u7a7a\u53f7\n\n\n\n\n\n\n510\n\n\n\u53d1\u9001\u5931\u8d25, \u624b\u673a\u505c\u673a\n\n\n\n\n\n\n550\n\n\n\u53d1\u9001\u5931\u8d25, \u8be5\u6a21\u677f\u5185\u5bb9\u88ab\u6295\u8bc9\n\n\n\n\n\n\n580\n\n\n\u53d1\u9001\u5931\u8d25, \u624b\u673a\u5173\u673a\n\n\n\n\n\n\n590\n\n\n\u53d1\u9001\u5931\u8d25, \u5176\u4ed6\u539f\u56e0", 
            "title": "API"
        }, 
        {
            "location": "/sms/api/#send", 
            "text": "\u53d1\u9001\u4e00\u4e2a\u77ed\u4fe1\u6a21\u677f\u7ed9\u4e00\u4e2a\u7528\u6237  URL  http://sendcloud.sohu.com/smsapi/send  \u8fd4\u56de\u6570\u636e\u683c\u5f0f  json  HTTP\u8bf7\u6c42\u65b9\u5f0f       GET POST      \u53c2\u6570\u8bf4\u660e     \u53c2\u6570  \u7c7b\u578b  \u5fc5\u9009  \u8bf4\u660e      smsUser  string  \u662f  \u5b50\u8d26\u53f7    templateId  int  \u662f  \u6a21\u677fID    phone  string  \u662f  \u6536\u4fe1\u4eba\u624b\u673a\u53f7    vars  string  \u5426  \u66ff\u6362\u53d8\u91cf\u7684json\u4e32    signature  string  \u662f  \u7b7e\u540d, \u5408\u6cd5\u6027\u9a8c\u8bc1    timestamp  string  \u5426  UNIX\u65f6\u95f4\u6233     vars\u683c\u5f0f\u793a\u4f8b:  {\"name\": \"lucy\"} or {\"%name%\": \"lucy\"}  \u6ce8\u610f :     \u53c2\u6570 vars \u53ef\u80fd\u542b\u6709\u7279\u6b8a\u5b57\u7b26, \u8bb0\u5f97  urlencode    vars \u6240\u4f20\u9012\u7684\u53d8\u91cf\u7684\u503c, \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 32 \u4e2a\u5b57\u7b26, \u53d8\u91cf\u4e2d\u4e0d\u80fd\u542b\u6709 HTTP \u94fe\u63a5    \u751f\u6210\u7b7e\u540d\u65f6, \u53c2\u6570\u4e0d\u8981\u4f7f\u7528  urlencode . \u5728\u8c03\u7528 api \u65f6, \u624d\u9700\u8981\u5bf9\u53c2\u6570\u505a  urlencode", 
            "title": "send"
        }, 
        {
            "location": "/sms/api/#sendn", 
            "text": "\u53d1\u9001\u4e00\u4e2a\u77ed\u4fe1\u6a21\u677f\u7ed9\u591a\u4e2a\u7528\u6237, \u6bcf\u4e2a\u7528\u6237\u5bf9\u5e94\u4e00\u4e2a\u66ff\u6362\u53d8\u91cf.  URL  http://sendcloud.sohu.com/smsapi/sendn  \u8fd4\u56de\u6570\u636e\u683c\u5f0f  json  HTTP\u8bf7\u6c42\u65b9\u5f0f       GET POST      \u53c2\u6570\u8bf4\u660e     \u53c2\u6570  \u7c7b\u578b  \u5fc5\u9009  \u8bf4\u660e      smsUser  string  \u662f  \u5b50\u8d26\u53f7    templateId  int  \u662f  \u6a21\u677fID    tos  string  \u662f  \u624b\u673a\u53f7\u548c\u66ff\u6362\u53d8\u91cf\u7684\u5bf9\u5e94\u7684json\u4e32    signature  string  \u662f  \u7b7e\u540d, \u5408\u6cd5\u6027\u9a8c\u8bc1    timestamp  string  \u5426  UNIX\u65f6\u95f4\u6233     vars\u683c\u5f0f\u793a\u4f8b:  {\"name\": \"lucy\"} or {\"%name%\": \"lucy\"}  tos\u683c\u5f0f\u793a\u4f8b:  [{\"phone\": \"13111111111\", \"vars\": {\"%name%\": \"name1\"}}, {\"phone\": \"13122222222\", \"vars\": {\"%name%\": \"name2\"}}]  \u6ce8\u610f :     \u53c2\u6570 vars \u53ef\u80fd\u542b\u6709\u7279\u6b8a\u5b57\u7b26, \u8bb0\u5f97  urlencode    vars \u6240\u4f20\u9012\u7684\u53d8\u91cf\u7684\u503c, \u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 32 \u4e2a\u5b57\u7b26, \u53d8\u91cf\u4e2d\u4e0d\u80fd\u542b\u6709 HTTP \u94fe\u63a5    \u751f\u6210\u7b7e\u540d\u65f6, \u53c2\u6570\u4e0d\u8981\u4f7f\u7528  urlencode . \u5728\u8c03\u7528 api \u65f6, \u624d\u9700\u8981\u5bf9\u53c2\u6570\u505a  urlencode", 
            "title": "sendn (\u6682\u4e0d\u5f00\u901a)"
        }, 
        {
            "location": "/sms/api/#timestamp", 
            "text": "\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\u6233  URL  http://sendcloud.sohu.com/smsapi/timestamp/get  \u8fd4\u56de\u6570\u636e\u683c\u5f0f  json  HTTP\u8bf7\u6c42\u65b9\u5f0f       GET  \u53c2\u6570\u8bf4\u660e  \u65e0", 
            "title": "timestamp"
        }, 
        {
            "location": "/sms/api/#_1", 
            "text": "\u77ed\u4fe1 API \u8fd4\u56de\u7684\u7ed3\u679c\u662f JSON \u683c\u5f0f, \u793a\u4f8b\u5982\u4e0b:   # \u8bf7\u6c42\u6210\u529f\n{\n     message : \u8bf7\u6c42\u6210\u529f ,\n     info :{},\n     result :true,\n     statusCode :200\n}\n\n# \u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\n{\n     message : \u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef ,\n     info :{},\n     result :false,\n     statusCode :412\n}\n\n# \u90e8\u5206\u6210\u529f\n{\n     message : \u90e8\u5206\u6210\u529f ,\n     info :{\n             successCount :1,\n             failedCount :1,\n             items :[{ phone : 1312222 , vars :{}, message : \u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef }]\n            },\n     result :true,\n     statusCode :311\n}   result: API \u8bf7\u6c42\u662f\u5426\u6210\u529f  statusCode: API \u8fd4\u56de\u7801  message: API \u8fd4\u56de\u7801\u7684\u4e2d\u6587\u89e3\u91ca  info: \u66f4\u591a\u4fe1\u606f, \u6bd4\u5982:  \u90e8\u5206\u6210\u529f \u5219\u8fd4\u56de\u5177\u4f53\u5931\u8d25\u4fe1\u606f,  \u83b7\u53d6\u65f6\u95f4\u6233 \u5219\u8fd4\u56de\u65f6\u95f4\u6233\u7684\u503c      API \u8fd4\u56de\u7801  \u542b\u4e49      200  \u8bf7\u6c42\u6210\u529f    311  \u90e8\u5206\u53f7\u7801\u8bf7\u6c42\u6210\u529f    411  \u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a    412  \u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef    413  \u6709\u91cd\u590d\u7684\u624b\u673a\u53f7    421  \u7b7e\u540d\u53c2\u6570\u9519\u8bef    422  \u7b7e\u540d\u9519\u8bef    431  \u6a21\u677f\u4e0d\u5b58\u5728    432  \u6a21\u677f\u672a\u63d0\u4ea4\u5ba1\u6838\u6216\u8005\u672a\u5ba1\u6838\u901a\u8fc7    433  \u6a21\u677fID\u4e0d\u80fd\u4e3a\u7a7a    441  \u66ff\u6362\u53d8\u91cf\u683c\u5f0f\u9519\u8bef    451  \u5b9a\u65f6\u53d1\u9001\u65f6\u95f4\u7684\u683c\u5f0f\u9519\u8bef    452  \u5b9a\u65f6\u53d1\u9001\u65f6\u95f4\u65e9\u4e8e\u670d\u52a1\u5668\u65f6\u95f4, \u65f6\u95f4\u5df2\u8fc7\u53bb    461  \u65f6\u95f4\u6233\u65e0\u6548, \u4e0e\u670d\u52a1\u5668\u65f6\u95f4\u95f4\u9694\u5927\u4e8e6\u79d2    471  smsUser\u4e0d\u5b58\u5728    472  smsUser\u4e0d\u80fd\u4e3a\u7a7a    473  \u6ca1\u6709\u6743\u9650, \u514d\u8d39\u7528\u6237\u4e0d\u80fd\u53d1\u9001\u77ed\u4fe1    474  \u7528\u6237\u4e0d\u5b58\u5728    481  \u624b\u673a\u53f7\u548c\u66ff\u6362\u53d8\u91cf\u4e0d\u80fd\u4e3a\u7a7a    482  \u624b\u673a\u53f7\u548c\u66ff\u6362\u53d8\u91cf\u683c\u5f0f\u9519\u8bef    483  \u66ff\u6362\u53d8\u91cf\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc732\u4e2a\u5b57\u7b26    497  \u4e94\u5206\u949f\u5185\u7ed9\u5f53\u524d\u624b\u673a\u53f7\u53d1\u4fe1\u592a\u591a    498  \u4e00\u5929\u5185\u7ed9\u5f53\u524d\u624b\u673a\u53f7\u53d1\u4fe1\u592a\u591a    499  \u8d26\u6237\u989d\u5ea6\u4e0d\u591f    501  \u670d\u52a1\u5668\u5f02\u5e38        SMSHook \u9519\u8bef\u7801(statusCode)  \u542b\u4e49      410  \u5904\u7406\u5931\u8d25, \u624b\u673a\u53f7\u5728\u5168\u5c40\u62e6\u622a\u5217\u8868    420  \u5904\u7406\u5931\u8d25, \u624b\u673a\u53f7\u5728\u5c40\u90e8\u62e6\u622a\u5217\u8868    430  \u5904\u7406\u5931\u8d25, \u53d6\u6d88\u8ba2\u9605    440  \u5904\u7406\u5931\u8d25, \u5173\u952e\u8bcd\u8fc7\u6ee4    450  \u5904\u7406\u5931\u8d25, \u66ff\u6362\u53d8\u91cf\u9519\u8bef    460  \u5904\u7406\u5931\u8d25, \u77ed\u4fe1\u5185\u5bb9\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26    500  \u53d1\u9001\u5931\u8d25, \u624b\u673a\u7a7a\u53f7    510  \u53d1\u9001\u5931\u8d25, \u624b\u673a\u505c\u673a    550  \u53d1\u9001\u5931\u8d25, \u8be5\u6a21\u677f\u5185\u5bb9\u88ab\u6295\u8bc9    580  \u53d1\u9001\u5931\u8d25, \u624b\u673a\u5173\u673a    590  \u53d1\u9001\u5931\u8d25, \u5176\u4ed6\u539f\u56e0", 
            "title": "\u8fd4\u56de\u7801"
        }, 
        {
            "location": "/sms/code/", 
            "text": "Python\n\n\nimport requests\nimport json\nimport urllib\nimport time\nfrom hashlib import md5\n\ndef generate_md5(fp):\n    m = md5()    \n    m.update(fp)\n    return m.hexdigest()\n\nurl = 'http://sendcloud.sohu.com/smsapi/send'\nSMS_KEY = '***'\n\nparam = {\n    'smsUser':'***',\n    'smsKey' : SMS_KEY,\n    'templateId' : 1,\n    'phone' : 13412345678,\n    'vars' : '{\n%code%\n:\n123456\n}'\n}\n\nparam_keys = list(param.keys())\nparam_keys.sort()\n\nparam_str = \n\nfor key in param_keys:\n    param_str += key + '=' + str(param[key]) + '\n'\nparam_str = param_str[:-1]\n\nsign_str = SMS_KEY + '\n' + param_str + '\n' + SMS_KEY\nsign = generate_md5(sign_str)\n\nparam['signature'] = sign\n\nres = requests.post(url,data=param)\nprint res.text\n\n\n\n\n\nJava\n\n\n\u4ee3\u7801\u793a\u4f8b\u9700\u8981\u4f9d\u8d56\u5982\u4e0bjar\u5305\n\n\ndependency\n\n    \ngroupId\norg.apache.httpcomponents\n/groupId\n\n    \nartifactId\nhttpclient\n/artifactId\n\n    \nversion\n4.2\n/version\n\n\n/dependency\n\n\ndependency\n\n    \ngroupId\norg.apache.httpcomponents\n/groupId\n\n    \nartifactId\nhttpmime\n/artifactId\n\n    \nversion\n4.2\n/version\n\n\n/dependency\n\n\n\n\n\nhttpclient\n\n\nhttpmime\n\n\npublic class SmsApi {\n\n    public static void main(String[] args) {\n\n        String url = \nhttp://sendcloud.sohu.com/smsapi/send\n;\n        String smsKey = \n***\n;\n\n        // \u586b\u5145\u53c2\u6570\n        Map\nString, String\n params = new HashMap\nString, String\n();\n        params.put(\nsmsUser\n, \n***\n);\n        params.put(\ntemplateId\n, \n1\n);\n        params.put(\nphone\n, \n13412345678\n);\n        params.put(\nvars\n, \n{\\\ncode\\\n:\\\n123455\\\n}\n);\n\n        // \u5bf9\u53c2\u6570\u8fdb\u884c\u6392\u5e8f\n        Map\nString, String\n sortedMap = new TreeMap\nString, String\n(new Comparator\nString\n() {\n            @Override\n            public int compare(String arg0, String arg1) {\n                // \u5ffd\u7565\u5927\u5c0f\u5199\n                return arg0.compareToIgnoreCase(arg1); \n            }\n        });\n        sortedMap.putAll(params);\n\n        // \u8ba1\u7b97\u7b7e\u540d\n        StringBuilder sb = new StringBuilder();\n        sb.append(smsKey).append(\n);\n        for (String s : sortedMap.keySet()) {\n            sb.append(String.format(\n%s=%s\n, s, sortedMap.get(s)));\n        }\n        sb.append(smsKey);\n        String sig = DigestUtils.md5Hex(sb.toString());\n\n        // \u5c06\u6240\u6709\u53c2\u6570\u548c\u7b7e\u540d\u6dfb\u52a0\u5230post\u8bf7\u6c42\u53c2\u6570\u6570\u7ec4\u91cc\n        List\nNameValuePair\n postparams = new ArrayList\nNameValuePair\n();\n        for (String s : sortedMap.keySet()) {\n            postparams.add(new BasicNameValuePair(s, sortedMap.get(s)));\n        }\n        postparams.add(new BasicNameValuePair(\nsignature\n, sig));\n\n        HttpPost httpPost = new HttpPost(url);\n        try {\n            httpPost.setEntity(new UrlEncodedFormEntity(postparams, \nutf8\n));\n            DefaultHttpClient httpclient = new DefaultHttpClient();\n            httpclient.getParams().setIntParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, 3000);\n            httpclient.getParams().setIntParameter(CoreConnectionPNames.SO_TIMEOUT, 100000);\n            HttpResponse response = httpclient.execute(httpPost);\n\n            HttpEntity entity = response.getEntity();\n            EntityUtils.consume(entity);\n            System.out.println(EntityUtils.toString(response.getEntity()));\n        } catch (Exception e) {\n            System.out.println(e.toString());\n        } finally {\n            httpPost.releaseConnection();\n        }\n    }\n}\n\n\n\n\n\nPHP\n\n\n?php\n\nfunction send_sms() {\n        $url = 'http://sendcloud.sohu.com/smsapi/send';\n\n        $param = array(\n            'smsUser' =\n '***', \n            'templateId' =\n '1',\n            'phone' =\n '13412345678',\n            'vars' =\n '{\n%code%\n:\n123456\n}'\n        );\n\n        $sParamStr = \n;\n        ksort($param);\n        foreach ($param as $sKey =\n $sValue) {\n            $sParamStr .= $sKey . '=' . $sValue . '\n';\n        }\n\n        $sParamStr = trim($sParamStr, '\n');\n        $smskey = '***'\n        $sSignature = md5($smskey.\n.$sParamStr.\n.$smskey);\n\n\n        $param = array(\n            'smsUser' =\n '***', \n            'templateId' =\n '1',\n            'phone' =\n '13412345678',\n            'vars' =\n '{\n%code%\n:\n123456\n}',\n            'signature' =\n $sSignature\n        );\n\n        $data = http_build_query($param);\n        echo $data;\n\n        $options = array(\n            'http' =\n array(\n                'method' =\n 'POST',\n                'header' =\n 'Content-Type:application/x-www-form-urlencoded',\n                'content' =\n $data\n\n        ));\n        $context  = stream_context_create($options);\n        $result = file_get_contents($url, FILE_TEXT, $context);\n\n        return $result;\n}\n\necho send_sms();\n?\n\n\n\n\n\nRuby\n\n\n#!/usr/bin/env ruby\n\nrequire 'rubygems'\nrequire 'digest'\nrequire 'rest_client'\n\ndef sorted_hash(aHash)\n   return aHash.sort{|a,b| a.to_s \n=\n b.to_s}\nend\n\ndef send_mail\n        param = {\n            \nsmsUser\n=\n \n***\n, \n            \ntemplateId\n=\n \n1\n,\n            \nphone\n=\n '13412345678',\n            \nvars\n=\n'{\n%code%\n:\n123456\n}'  \n        }\n        api_key = \n***\n\n        paramstr = \n\n        paramstr \n api_key \n \n\n        new_param = sorted_hash(param)\n        new_param.each do |item|\n            key = item[0]\n            value = item[1]\n            paramstr \n key \n \n=\n \n value \n \n\n        end\n        paramstr \n api_key\n\n        md5 = Digest::MD5.new\n        sign = md5.update(paramstr)\n\n        response = RestClient.post \nhttp://sendcloud.sohu.com/smsapi/send?\n,\n            :smsUser =\n \n***\n,\n            :templateId =\n \n11\n,\n            :phone =\n '13412345678',\n            :vars =\n'{\n%code%\n:\n123456\n}',\n            :signature =\n sign\n\nreturn response\nend\n\nresponse = send_mail\nputs response.code\nputs response.to_str\n\n\n\n\n\nPerl\n\n\nuse strict;\nuse LWP::UserAgent;\nuse HTTP::Request::Common;\nuse URI::Escape;\nuse Digest::MD5;\n\nmy $uri = 'http://sendcloud.sohu.com/smsapi/send';\nmy $ua = LWP::UserAgent-\nnew;\nmy %param = (\n    \nsmsUser\n =\n '***',\n    \ntemplateId\n =\n '1',\n    \nphone\n =\n '13412345678', \n    \nvars\n =\n '{\n%code%\n:\n123456\n}');\nmy $api_key = \n***\n;\nmy $param_str = $api_key;\n\nforeach my $item (sort keys %param){\n    $param_str .= (\n.$item.\n=\n.$param{$item});\n}\n$param_str .= (\n.$api_key);\n\nmy $md5 = Digest::MD5-\nnew;\n$md5-\nadd($param_str);\nmy $sign = $md5-\nhexdigest;\n\nmy $request = POST $uri,\n    Content =\n [\n        smsUser =\n '***', \n        templateId =\n '1',\n        phone =\n '13412345678', \n        vars =\n '{\n%code%\n:\n123456\n}',\n        signature =\n $sign\n    ],\n    Content_Type =\n 'application/x-www-form-urlencoded';\n\nmy $response = $ua-\nrequest($request) ;\n\nif ($response-\nis_success()) {\n    print $response-\ncontent, \n\\n\n;\n} else {\n    print $response-\nas_string, \n\\n\n;\n}\n\nexit;", 
            "title": "Code"
        }, 
        {
            "location": "/sms/code/#python", 
            "text": "import requests\nimport json\nimport urllib\nimport time\nfrom hashlib import md5\n\ndef generate_md5(fp):\n    m = md5()    \n    m.update(fp)\n    return m.hexdigest()\n\nurl = 'http://sendcloud.sohu.com/smsapi/send'\nSMS_KEY = '***'\n\nparam = {\n    'smsUser':'***',\n    'smsKey' : SMS_KEY,\n    'templateId' : 1,\n    'phone' : 13412345678,\n    'vars' : '{ %code% : 123456 }'\n}\n\nparam_keys = list(param.keys())\nparam_keys.sort()\n\nparam_str =  \nfor key in param_keys:\n    param_str += key + '=' + str(param[key]) + ' '\nparam_str = param_str[:-1]\n\nsign_str = SMS_KEY + ' ' + param_str + ' ' + SMS_KEY\nsign = generate_md5(sign_str)\n\nparam['signature'] = sign\n\nres = requests.post(url,data=param)\nprint res.text", 
            "title": "Python"
        }, 
        {
            "location": "/sms/code/#java", 
            "text": "\u4ee3\u7801\u793a\u4f8b\u9700\u8981\u4f9d\u8d56\u5982\u4e0bjar\u5305  dependency \n     groupId org.apache.httpcomponents /groupId \n     artifactId httpclient /artifactId \n     version 4.2 /version  /dependency  dependency \n     groupId org.apache.httpcomponents /groupId \n     artifactId httpmime /artifactId \n     version 4.2 /version  /dependency   httpclient  httpmime  public class SmsApi {\n\n    public static void main(String[] args) {\n\n        String url =  http://sendcloud.sohu.com/smsapi/send ;\n        String smsKey =  *** ;\n\n        // \u586b\u5145\u53c2\u6570\n        Map String, String  params = new HashMap String, String ();\n        params.put( smsUser ,  *** );\n        params.put( templateId ,  1 );\n        params.put( phone ,  13412345678 );\n        params.put( vars ,  {\\ code\\ :\\ 123455\\ } );\n\n        // \u5bf9\u53c2\u6570\u8fdb\u884c\u6392\u5e8f\n        Map String, String  sortedMap = new TreeMap String, String (new Comparator String () {\n            @Override\n            public int compare(String arg0, String arg1) {\n                // \u5ffd\u7565\u5927\u5c0f\u5199\n                return arg0.compareToIgnoreCase(arg1); \n            }\n        });\n        sortedMap.putAll(params);\n\n        // \u8ba1\u7b97\u7b7e\u540d\n        StringBuilder sb = new StringBuilder();\n        sb.append(smsKey).append( );\n        for (String s : sortedMap.keySet()) {\n            sb.append(String.format( %s=%s , s, sortedMap.get(s)));\n        }\n        sb.append(smsKey);\n        String sig = DigestUtils.md5Hex(sb.toString());\n\n        // \u5c06\u6240\u6709\u53c2\u6570\u548c\u7b7e\u540d\u6dfb\u52a0\u5230post\u8bf7\u6c42\u53c2\u6570\u6570\u7ec4\u91cc\n        List NameValuePair  postparams = new ArrayList NameValuePair ();\n        for (String s : sortedMap.keySet()) {\n            postparams.add(new BasicNameValuePair(s, sortedMap.get(s)));\n        }\n        postparams.add(new BasicNameValuePair( signature , sig));\n\n        HttpPost httpPost = new HttpPost(url);\n        try {\n            httpPost.setEntity(new UrlEncodedFormEntity(postparams,  utf8 ));\n            DefaultHttpClient httpclient = new DefaultHttpClient();\n            httpclient.getParams().setIntParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, 3000);\n            httpclient.getParams().setIntParameter(CoreConnectionPNames.SO_TIMEOUT, 100000);\n            HttpResponse response = httpclient.execute(httpPost);\n\n            HttpEntity entity = response.getEntity();\n            EntityUtils.consume(entity);\n            System.out.println(EntityUtils.toString(response.getEntity()));\n        } catch (Exception e) {\n            System.out.println(e.toString());\n        } finally {\n            httpPost.releaseConnection();\n        }\n    }\n}", 
            "title": "Java"
        }, 
        {
            "location": "/sms/code/#php", 
            "text": "?php\n\nfunction send_sms() {\n        $url = 'http://sendcloud.sohu.com/smsapi/send';\n\n        $param = array(\n            'smsUser' =  '***', \n            'templateId' =  '1',\n            'phone' =  '13412345678',\n            'vars' =  '{ %code% : 123456 }'\n        );\n\n        $sParamStr =  ;\n        ksort($param);\n        foreach ($param as $sKey =  $sValue) {\n            $sParamStr .= $sKey . '=' . $sValue . ' ';\n        }\n\n        $sParamStr = trim($sParamStr, ' ');\n        $smskey = '***'\n        $sSignature = md5($smskey. .$sParamStr. .$smskey);\n\n\n        $param = array(\n            'smsUser' =  '***', \n            'templateId' =  '1',\n            'phone' =  '13412345678',\n            'vars' =  '{ %code% : 123456 }',\n            'signature' =  $sSignature\n        );\n\n        $data = http_build_query($param);\n        echo $data;\n\n        $options = array(\n            'http' =  array(\n                'method' =  'POST',\n                'header' =  'Content-Type:application/x-www-form-urlencoded',\n                'content' =  $data\n\n        ));\n        $context  = stream_context_create($options);\n        $result = file_get_contents($url, FILE_TEXT, $context);\n\n        return $result;\n}\n\necho send_sms();\n?", 
            "title": "PHP"
        }, 
        {
            "location": "/sms/code/#ruby", 
            "text": "#!/usr/bin/env ruby\n\nrequire 'rubygems'\nrequire 'digest'\nrequire 'rest_client'\n\ndef sorted_hash(aHash)\n   return aHash.sort{|a,b| a.to_s  =  b.to_s}\nend\n\ndef send_mail\n        param = {\n             smsUser =   *** , \n             templateId =   1 ,\n             phone =  '13412345678',\n             vars = '{ %code% : 123456 }'  \n        }\n        api_key =  *** \n        paramstr =  \n        paramstr   api_key    \n        new_param = sorted_hash(param)\n        new_param.each do |item|\n            key = item[0]\n            value = item[1]\n            paramstr   key    =    value    \n        end\n        paramstr   api_key\n\n        md5 = Digest::MD5.new\n        sign = md5.update(paramstr)\n\n        response = RestClient.post  http://sendcloud.sohu.com/smsapi/send? ,\n            :smsUser =   *** ,\n            :templateId =   11 ,\n            :phone =  '13412345678',\n            :vars = '{ %code% : 123456 }',\n            :signature =  sign\n\nreturn response\nend\n\nresponse = send_mail\nputs response.code\nputs response.to_str", 
            "title": "Ruby"
        }, 
        {
            "location": "/sms/code/#perl", 
            "text": "use strict;\nuse LWP::UserAgent;\nuse HTTP::Request::Common;\nuse URI::Escape;\nuse Digest::MD5;\n\nmy $uri = 'http://sendcloud.sohu.com/smsapi/send';\nmy $ua = LWP::UserAgent- new;\nmy %param = (\n     smsUser  =  '***',\n     templateId  =  '1',\n     phone  =  '13412345678', \n     vars  =  '{ %code% : 123456 }');\nmy $api_key =  *** ;\nmy $param_str = $api_key;\n\nforeach my $item (sort keys %param){\n    $param_str .= ( .$item. = .$param{$item});\n}\n$param_str .= ( .$api_key);\n\nmy $md5 = Digest::MD5- new;\n$md5- add($param_str);\nmy $sign = $md5- hexdigest;\n\nmy $request = POST $uri,\n    Content =  [\n        smsUser =  '***', \n        templateId =  '1',\n        phone =  '13412345678', \n        vars =  '{ %code% : 123456 }',\n        signature =  $sign\n    ],\n    Content_Type =  'application/x-www-form-urlencoded';\n\nmy $response = $ua- request($request) ;\n\nif ($response- is_success()) {\n    print $response- content,  \\n ;\n} else {\n    print $response- as_string,  \\n ;\n}\n\nexit;", 
            "title": "Perl"
        }, 
        {
            "location": "/test/doc/", 
            "text": "", 
            "title": "TRY IT"
        }
    ]
}