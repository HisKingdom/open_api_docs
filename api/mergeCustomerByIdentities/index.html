<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="canonical" href="http://api-docs.convertlab.com/api/mergeCustomerByIdentities/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <title>客户合并 - Convertlab 文档中心</title>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../test/css/print.css" rel="stylesheet">

    
</head>
<body>
    <div class="navbar navbar-default" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://www.convertlab.com/">Convertlab 文档中心</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav navbar-right">
                
                  <li class="pull-left active">
                    
                    <a href="../..">OpenAPI V1</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="../../track/">网页埋点</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="/test/">TRY IT</a>
                    
                  </li>
                </ul>
            
        </div>
    </div>
</div>
    <div class="container main">
       <!--   <div class="toolbar clearfix">
  <ol class="breadcrumb pull-left">
    <li><a href="">文档</a></li>
    <li>客户合并</li>
  </ol>

  
    
      <a href="https://github.com/xsio/open_api_docs" class="github-edit pull-right"><i class="fa fa-github"></i> Edit on GitHub</a>
    
  

</div> -->
        <div class="col-md-3"><div class="bs-sidebar hidden-print" data-spy="affix" data-offset-top="80" role="complementary">
    <ul class="nav bs-sidenav">
     
      
        
          

              <li class="">
                <a class="itm-l1" href="../..">创建集成应用</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../accesstoken/">获取身份权限</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../customer/">客户信息</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../customerevent/">客户事件</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../customeridentities/">客户身份</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../tag/">客户标签</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../deal/">客户订单</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../list/">客户群组</a>
                
              </li>

          

              <li class="active">
                <a class="itm-l1" href="./">客户合并</a>
                
                  <ul class="nav">
                  
                    <li class="active "><a href="#api">根据客户身份合并客户的API</a></li>
                    
                  
                    <li class=""><a href="#idapi">根据客户id合并客户的API</a></li>
                    
                  
                  </ul>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../users/">账户管理</a>
                
              </li>

          
        
      

    
      
        
      

    
    </ul>
</div></div>
        <div class="col-md-9 content-body" role="main">
             

<h1>客户合并</h1>

<h2 id="api">根据客户身份合并客户的API</h2>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: POST
https://api.convertlab.com/v1/customerService/mergeCustomerByIdentities?access_token={access_token}
POST数据示例:
{
  &quot;from&quot;: {
    &quot;identityType&quot;: &quot;{identityType}&quot;,
    &quot;identityValue&quot;: &quot;{identityValue}&quot;
  },
  &quot;to&quot;: {
    &quot;identityType&quot;: &quot;{identityType}&quot;,
    &quot;identityValue&quot;: &quot;{identityValue}&quot;
  }
}
请求消息体示例:
{
  &quot;from&quot;: {
    &quot;identityType&quot;: &quot;wechat&quot;,
    &quot;identityValue&quot;: &quot;aaaa&quot;
  },
  &quot;to&quot;: {
    &quot;identityType&quot;: &quot;wechat-openid&quot;,
    &quot;identityValue&quot;: &quot;oVLMTt0zw5JEZc6PE0tIsA5Kz7f0&quot;
  }
}
</code></pre>

<p><strong>参数说明</strong></p>
<hr />
<ul>
<li>{access_token}用从“获取身份权限”节拿到的access_token替换</li>
</ul>
<p><strong>返回参数</strong></p>
<pre><code>{
  &quot;data&quot;: {
    &quot;customerId&quot;: &quot;{合并后的客户id}&quot;
  }
}
</code></pre>

<p><strong>返回错误结构</strong></p>
<pre><code>{
  &quot;error&quot;: {
    &quot;code&quot;: &quot;c50001&quot;,
    &quot;message&quot;: &quot;'from' or 'to' identity do not exist&quot;
  }
}
</code></pre>

<p><strong>错误码说明</strong></p>
<hr />
<table>
<thead>
<tr>
<th align="left">错误码</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">c50001</td>
<td align="left">请求格式不正确</td>
</tr>
<tr>
<td align="left">c50002</td>
<td align="left">被合并的客户不存在</td>
</tr>
<tr>
<td align="left">c50002</td>
<td align="left">未知请求错误</td>
</tr>
<tr>
<td align="left">s00001</td>
<td align="left">系统内部错误</td>
</tr>
</tbody>
</table>
<h2 id="idapi">根据客户id合并客户的API</h2>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: POST
https://api.convertlab.com/v1/customerService/mergeCustomerById?access_token={access_token}&amp;fromId={fromId}&amp;toId={toId}
</code></pre>

<p><strong>参数说明</strong></p>
<hr />
<ul>
<li>{access_token}用从“获取身份权限”节拿到的access_token替换</li>
<li>{fromId}合并的来源客户ID</li>
<li>{toId}合并的目标客户ID</li>
</ul>
<p>返回值与通过客户身份合并客户是一样的</p>
            <div class="ds-thread" data-thread-key="客户合并" data-title="客户合并" data-url=""></div>
        </div>
        
    </div>
    
    </script>
</body>

</html>